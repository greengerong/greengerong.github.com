
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>破狼 Blog</title>
  <meta name="author" content="破 狼">

  
  <meta name="description" content="&nbsp;&nbsp;&nbsp; 在html5中我觉得最重要的就是引入了Canvas，使得我们可以在web中绘制各种图形。给人感觉单在这点上有点模糊我们web和桌面程序的感觉。在html5外web中也有基于xml的绘图如：VML、SVG。而Canvas为基于像素的绘图。 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://greengerong.github.io/blog/page/11">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="破狼 Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">破狼 Blog</a></h1>
  
    <h2>Write less got more.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:greengerong.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/03/02/html5-Canvas-hui-tu/">html5-Canvas绘图</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-02T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2011/03/02/html5-Canvas-hui-tu/#disqus_thread"
             data-disqus-identifier="http://greengerong.github.io/blog/2011/03/02/html5-Canvas-hui-tu/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>&nbsp;&nbsp;&nbsp; 在html5中我觉得最重要的就是引入了Canvas，使得我们可以在web中绘制各种图形。给人感觉单在这点上有点模糊我们web和桌面程序的感觉。在html5外web中也有基于xml的绘图如：VML、SVG。而Canvas为基于像素的绘图。Canvas是一个相当于画板的html节点，我们必须以js操作绘图。</p>

<p>如下：</p>

<p>&lt;canvas id=&ldquo;myCanvas&rdquo; width=&ldquo;600&rdquo; height=&ldquo;300&rdquo;&gt;你的浏览器还不支持哦&lt;/canvas&gt;定义。</p>

<p>我们可以获取canvas对象为var c=document.getElementById(&ldquo;myCanvas&rdquo;);其应有js属性方法如下列举：</p>

<p>1：绘制渲染对象，c.getContext(&ldquo;2d&rdquo;),获取2d绘图对象，无论我们调用多少次获取的对象都将是相同的对象。</p>

<p>2：绘制方法：</p>

<p>clecrRect(left,top,width,height)清除制定矩形区域，</p>

<p>fillRect(left,top,width,height)绘制矩形，并以fillStyle填充。</p>

<p>fillText（text,x,y）绘制文字；</p>

<p>strokeRect(left,top,width,height)绘制矩形，以strokeStyle绘制边界。</p>

<p>beginPath():开启路径的绘制,重置path为初始状态；</p>

<p>closePath():绘制路径path结束，它会绘制一个闭合的区间，添加一条起始位置到当前坐标的闭合曲线；</p>

<p>moveTo（x，y）：设置绘图其实坐标。</p>

<p>lineTo(x，y);绘制从当前其实位置到x，y直线。</p>

<p>fill（），stroke（），clip（）：在完成绘制的最后的填充和边界轮廓，剪辑区域。</p>

<p>arc（）：绘制弧,圆心位置、起始弧度、终止弧度来指定圆弧的位置和大小；</p>

<p>rect():矩形路径;</p>

<p>drawImage（Imag img）：绘制图片；</p>

<p>quadraticCurveTo():二次样条曲线路径,参数两个控制点；</p>

<p>bezierCurveTo（）：贝塞尔曲线，参数三个控制点；</p>

<p>createImageData,getImageData，putImageData:为Canvas中像素数据。ImageData为记录width、height、和数据 data，其中data为我们色素的记录为</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; argb，所以数组大小长度为width<em>height</em>4，顺序分别为rgba。getImageData为获取矩形区域像素，而putImageData则为设置矩形区域像素；</p>

<p>&#8230; and so on！</p>

<p>3：坐标变换：</p>

<p>translate（x,y）：平移变换，原点移动到坐标（x，y）；</p>

<p>rotate（a）：旋转变换，旋转a度角；</p>

<p>scale（x，y）：伸缩变换；</p>

<p>save（），restore（）：提供和一个堆栈，保存和恢复绘图状态，save将当前绘图状态压入堆栈，restore出栈，恢复绘图状态；</p>

<p>&#8230; and so on！</p>

<p>好了，也晚了。附我的测试代码，：</p>

<pre><code>&lt;html&gt; 
  &lt;head&gt; 
  &lt;/head&gt; 
  &lt;body&gt; 
  &lt;canvas id="myCanvas" width="600" height="300"&gt;你的浏览器还不支持哦&lt;/canvas&gt; 
  &lt;script type="text/javascript"&gt; 

  var width,height,top,left; 
  width=height=100; 
  top=left=5; 
  var x=10; 
  var y=10; 

  var c=document.getElementById("myCanvas"); 

  var maxwidth=c.width-5; 
  var maxheight=c.height-5; 
  var cxt=c.getContext("2d"); 
  cxt.strokeStyle="#00f"; 
  cxt.strokeRect(0,0,c.width,c.height); 

  var img=new Image(); 
  img.src="1.gif"; 
  var MyInterval=null; 
  start(); 
  function Refresh(){ 
  cxt.clearRect(left,top,width,height); 
  if((left+x)&gt;(maxwidth-width)||left+x&lt;0){ 
  x=-x; 
  } 

  if((top+y)&gt;(maxheight-height)||top+y&lt;0){ 
  y=-y; 
  } 

  left=left+x;    
  top=top+y; 
  cxt.drawImage(img,left,top,width,height); 
  cxt.font="20pt 宋体"; 
  cxt.fillText("破狼",left,top+25); 

  } 

  function start(){ 
  if(MyInterval==null){ 
  MyInterval=setInterval("Refresh()",100); 
  } 
  } 

  function stop(){ 
  if(MyInterval!=null){ 
  clearInterval(MyInterval); 
  MyInterval=null; 
  } 
  } 
  function InRectangle(x,y,rectx,recty,rwidth,rheight){ 
  return (x&gt;=rectx&amp;&amp;x&lt;=rectx+rwidth)&amp;&amp;(y&gt;=recty&amp;&amp;y&lt;=recty+rheight) 
  } 
  c.onmouseover=function(e){ 
  if(InRectangle(e.clientX,e.clientY,left,top,width,height)){ 
  stop(); 
  } 

  c.onmouseout=function(e){ 
  start(); 
  } 

  c.onmousemove=function(e){ 
  if(InRectangle(e.clientX,e.clientY,left,top,width,height)){ 
  if(MyInterval!=null){ 
  stop(); 
  } 
  }else{ 
  start(); 
  } 
  } 

  } 
  &lt;/script&gt; 
  &lt;/body&gt; 
  &lt;/html&gt;
</code></pre>

<p>参考火狐html文档：<a href="https://developer.mozilla.org/en/HTML/HTML5" title="https://developer.mozilla.org/en/HTML/HTML5">https://developer.mozilla.org/en/HTML/HTML5</a></p>

<p>&nbsp;</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp; 我的html5系列：</p>

<p>&nbsp;</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2011/03/02/1968512.html" title="原文首发">原文首发请看这里</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/02/26/win7-xia-cheng-xu-yun-hang-quan-xian-wen-ti-jie-jue-fang-an/">Win7下程序运行权限问题解决方案</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-26T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2011/02/26/win7-xia-cheng-xu-yun-hang-quan-xian-wen-ti-jie-jue-fang-an/#disqus_thread"
             data-disqus-identifier="http://greengerong.github.io/blog/2011/02/26/win7-xia-cheng-xu-yun-hang-quan-xian-wen-ti-jie-jue-fang-an/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>&nbsp;&nbsp;&nbsp; 今天遇见一个win7下程序运行权限问题(需要对目录下文件有读写权限)：网上google下得到解决方案有,现记录下：</p>

<h2>一：</h2>

<p>&nbsp;&nbsp; windows 7和vista提高的系统的安全性，同时需要明确指定&#8220;以管理员身份运行&#8221;才可赋予被运行软件比较高级的权限，比如访问注册表等。否则，当以普通身份运行的程序需要访问较高级的系统资源时，将会抛出异常。</p>

<p>　　如何让程序在启动时，自动要求&#8220;管理员&#8221;权限了，我们只需要修改app.manifest文件中的配置项即可。</p>

<p>　　app.manifest文件默认是不存在的，我们可以通过以下操作来自动添加该文件。</p>

<p>（1）进入项目属性页。</p>

<p>（2）选择&#8220;安全性&#8221;栏目。</p>

<p>（3）将&#8220;启用ClickOnce安全设置&#8221;勾选上。</p>

<p>　　现在，在Properties目录下就自动生成了app.manifest文件，打开该文件，将trustInfo/security/requestedPrivileges节点的requestedExecutionLevel的level的值修改为requireAdministrator即可。如下所示：</p>

<div class="cnblogs_code" onclick="cnblogs_code_show('196faf80-6c73-421d-a3a0-d3e648f2ca9c')">
<div id="cnblogs_code_open_196faf80-6c73-421d-a3a0-d3e648f2ca9c">
<div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)

http://www.CodeHighlighter.com/

--><span style="color: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="color: #000000">requestedPrivileges&nbsp;xmlns</span><span style="color: #000000">=</span><span style="color: #800000">&#8221;</span><span style="color: #800000">urn:schemas-microsoft-com:asm.v3</span><span style="color: #800000">&#8221;</span><span style="color: #000000">&gt;</span><span style="color: #000000">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #000000">&lt;</span><span style="color: #000000">requestedExecutionLevel&nbsp;level</span><span style="color: #000000">=</span><span style="color: #800000">&#8221;</span><span style="color: red">**requireAdministrator**</span><span style="color: #800000">&#8221;</span><span style="color: #000000">&nbsp;uiAccess</span><span style="color: #000000">=</span><span style="color: #800000">&#8221;</span><span style="color: #800000">false</span><span style="color: #800000">&#8221;</span><span style="color: #000000">&nbsp;</span><span style="color: #000000">/&gt;</span><span style="color: #000000">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">&lt;/</span><span style="color: #000000">requestedPrivileges</span><span style="color: #000000">&gt;</span></div></div></div>


<p>&nbsp;</p>

<p>　　记住，如果不需要ClickOnce，可以回到项目属性页将&#8220;启用ClickOnce安全设置&#8221;不勾选。&nbsp;　　</p>

<p>　　接下来，重新编译你的程序就OK了。</p>

<p>&nbsp;</p>

<h2>二：</h2>

<p>&nbsp; 可以把文件的安装路径默认在非系统目录下，如d:\sorftwarename\等。或者酱程序和读写数据分开，读写数据文件放在我的文档下等，避开文件访问读写权限，避开program files目录。像google德Chrome就是文件直接默认（不能改动）安装在AppData下。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2011/02/26/1965824.html" title="原文首发">原文首发请看这里</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/01/01/The-Microsoft-Jet-OLEDB-4-0-provider-is-not-registered-on-the-local-machine-Excel2003/">The &#x27;Microsoft.Jet.OLEDB.4.0&#x27; Provider Is Not Registered on the Local machine-Excel2003</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-01-01T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2011/01/01/The-Microsoft-Jet-OLEDB-4-0-provider-is-not-registered-on-the-local-machine-Excel2003/#disqus_thread"
             data-disqus-identifier="http://greengerong.github.io/blog/2011/01/01/The-Microsoft-Jet-OLEDB-4-0-provider-is-not-registered-on-the-local-machine-Excel2003/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>&nbsp;&nbsp;&nbsp; 今天在操作Excel2003时候在我的win7英文操作系统发生错误，（在此记录下来）：</p>

<p>The &lsquo;Microsoft.Jet.OLEDB.4.0&rsquo; provider is not registered on the local machine.</p>

<p>在网上google了一下，错误原因是我的机子是64编译的，需要改为32位，在vs中设置将编译Any CPU改为x86，就ok。</p>

<p><img src="http://images.cnblogs.com/cnblogs_com/whitewolf/QQ%E6%88%AA%E5%9B%BE%E6%9C%AA%E5%91%BD%E5%90%8D.png" alt="The " /></p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2011/01/01/1923744.html" title="原文首发">原文首发请看这里</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/23/dai-ma-sheng-cheng-ji-shu-CodeDom-VS-T4/">代码生成技术&#8211;CodeDom vs T4</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-23T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2010/12/23/dai-ma-sheng-cheng-ji-shu-CodeDom-VS-T4/#disqus_thread"
             data-disqus-identifier="http://greengerong.github.io/blog/2010/12/23/dai-ma-sheng-cheng-ji-shu-CodeDom-VS-T4/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>&nbsp;&nbsp;&nbsp;&nbsp; 在微软的自家代码生成方案中我们有两种选择方式:CodeDom 和Text Template Transformation Toolkit（T4）模板。同样我们可以利用简单的String或者StringBuilder来拼接字符串，但是那对于简单的还可以，但是对于复杂的问题就<img src="http://images.cnblogs.com/cnblogs_com/whitewolf/201012/201012231245237287.png" alt="悲伤" />。其实在ASP.NET MVC 3.0中有多处了一个更简洁语法的模板-Razor，我们同样可以运用于我们自己的代码生成中，我随便有一篇简单的介绍<a href="http://www.cnblogs.com/whitewolf/archive/2010/12/22/1913718.html">Razor Templating Engine</a>，在以后有机会了会写Razor Demo。今天的主题不在这里，所以不多说了。</p>

<h3>一：简介：</h3>

<p>CodeDom：这 个类库出现在我们的.NET Framework 2.0，并且被深深的用于我们的ASP.NET项目中。CodeDom关注于一个语言独立性，以至于我们可以利用我们熟悉的语言（c#，vb等）构建一个CodeDom Model Tree,就可以生成我们在.NET平台所支持的语言代码。对于我们的ASP.NET要求语言的独立。</p>

<p>T4：T4模板作为VS2008的一部分出现，他以&lt;# #&gt; 、&lt;#= #&gt;接近于ASP.NET的语言在模板中插入一段段的动态代码块，可以像asp或者ASP.NET一样简单的更让人贴切，相对于CodeDom就更简洁，但是没有了语言层次的抽象，不具有语言独立性，我们必须为同一个功能的模板在不同的语言上写不同的模板，但是在开发中往往c#模板就足够了，以及更简单化所以得到了更多人的青睐。</p>

<p>二：Code Demo：</p>

<p>下面我们将用CodeDom和t4分别生成一个简单的Code，根据时间输出不同的问候，如下：</p>

<p>1：CodeDom Code:</p>

<pre><code>using System; 
using System.Text; 
using System.CodeDom; 
using System.IO;

namespace RazorDemo 
{ 
    public class CodedomDemo 
    { 
        public CodeCompileUnit CrateCodeCompileUnit() 
        { 
            var testClass = new CodeTypeDeclaration("Test"); 
            var testMeth = new CodeMemberMethod() 
            { 
                Attributes = MemberAttributes.Public| MemberAttributes.Final, 
                Name = "SayHello", 
            }; 
            var param = new CodeParameterDeclarationExpression(new CodeTypeReference(typeof(string)), "name"); 
            testMeth.Parameters.Add(param); 
            testClass.Members.Add(testMeth);

            var nowExpression = new CodePropertyReferenceExpression(new CodePropertyReferenceExpression(new CodeTypeReferenceExpression(typeof(DateTime)), "Now"), "Hour"); 
            var assmon = new CodeBinaryOperatorExpression(new CodePrimitiveExpression("早上好:"), CodeBinaryOperatorType.Add, new CodeArgumentReferenceExpression("name") ); 
            var asslunch = new CodeBinaryOperatorExpression(new CodePrimitiveExpression("中午好:"), CodeBinaryOperatorType.Add, new CodeArgumentReferenceExpression("name")); 
            var assAfternoon = new CodeBinaryOperatorExpression(new CodePrimitiveExpression("下午好:"), CodeBinaryOperatorType.Add, new CodeArgumentReferenceExpression("name")); 
            var codecondition = new CodeConditionStatement(new CodeBinaryOperatorExpression( 
                nowExpression, CodeBinaryOperatorType.LessThanOrEqual, new CodePrimitiveExpression(10)), 
                new CodeStatement[] { new CodeExpressionStatement(new CodeMethodInvokeExpression(new CodeTypeReferenceExpression(typeof(Console)), "WriteLine", assmon)) },           //true:if(DateTime.Now&lt;=10) 
                //else 
                new CodeStatement[] 
                { 
                   new CodeConditionStatement(new CodeBinaryOperatorExpression(nowExpression, CodeBinaryOperatorType.LessThanOrEqual,new CodePrimitiveExpression(14) ),  // else if(DateTime.Now&lt;=14) 
                     new CodeStatement[] { new CodeExpressionStatement(new CodeMethodInvokeExpression(new CodeTypeReferenceExpression(typeof(Console)), "WriteLine",asslunch))},    //true 
                     new CodeStatement[] { new CodeExpressionStatement(new CodeMethodInvokeExpression(new CodeTypeReferenceExpression(typeof(Console)), "WriteLine",assAfternoon))}) //fasle 
                } 
               );

            testMeth.Statements.AddRange(new CodeStatement[] {             
            codecondition 
            });

            var ns = new CodeNamespace("Wolf"); 
            ns.Imports.Add(new CodeNamespaceImport("System")); 
            ns.Types.Add(testClass); 
            var util = new CodeCompileUnit(); 
            util.Namespaces.Add(ns); 
            return util; 
        }

        public string Genertor(string language) 
        { 
            StringBuilder sb = new StringBuilder(); 
            StringWriter sw = new StringWriter(sb); 
            System.CodeDom.Compiler.CodeDomProvider.CreateProvider(language).GenerateCodeFromCompileUnit( 
                this.CrateCodeCompileUnit(), sw, new System.CodeDom.Compiler.CodeGeneratorOptions() 
                { 
                    ElseOnClosing = true, 
                    IndentString = "    " 
                }); 
            sw.Close(); 
            return sb.ToString();

        } 
    } 
}
</code></pre>

<p>2:T4 Code：</p>

<pre><code>&lt;#@ template language="C#" #&gt;

using System; 
namespace WolfT4 {   
    public class Test {

        public void SayHello(string name) { 
            &lt;# if(System.DateTime.Now.Hour&lt;=10){#&gt; 
            System.Console.WriteLine(("早上好:" + name)); 
            &lt;#} else if(System.DateTime.Now.Hour&lt;=14){#&gt; 
            System.Console.WriteLine(("中午好:" + name)); 
            &lt;#} else{ #&gt; 
            System.Console.WriteLine(("下午好:" + name)); 
            &lt;#}#&gt;            
        } 
    } 
}
</code></pre>

<p>&nbsp;三：总结：</p>

<p>CodeDom的优势：</p>

<p>1：具有语言层次抽象，独立性：是一个单语言开发，多语言生成的方式。</p>

<p>2：<strong>Framework </strong>的支持：作为我们的.NET Framework 一部分出现的，位于System.CodeDom命名空间下。不需要想T4 模板一样引用Microsoft.VisualStudio.TextTemplating.dll</p>

<p>T4优势：</p>

<p>1：更加贴切：采用的是类似于ASP、ASP.NET的语言块，是的我们的开发更贴切，采用模板方式更加简洁，快速。</p>

<p>2：可维护性：由于是基于文件，不像codedom编译成为dll方式，我们可以随时修改Template文件、重构。</p>

<p>&nbsp;</p>

<p>其实我觉得只要是不要求语言独立性，多语言生成的话，就采用T4或者Razor等模板。</p>

<p>代码生成技术（目前完成，还在继续，好久没写了&hellip;）：</p>

<p>1：<a href="http://www.cnblogs.com/whitewolf/archive/2010/07/09/1774279.html"><font color="#6699cc">CodeDom系列目录</font></a></p>

<p>2：<a href="http://www.cnblogs.com/whitewolf/archive/2010/09/27/1836729.html"><font color="#6699cc">CodeSmith模板引擎系列-目录</font></a></p>

<p>3：<a href="http://www.cnblogs.com/whitewolf/archive/2010/12/22/1913718.html"><font color="#6699cc">Razor Templating Engine</font></a></p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2010/12/23/1914700.html" title="原文首发">原文首发请看这里</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/22/Razor-Templating-Engine/">Razor Templating Engine</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-22T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2010/12/22/Razor-Templating-Engine/#disqus_thread"
             data-disqus-identifier="http://greengerong.github.io/blog/2010/12/22/Razor-Templating-Engine/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 最近遇到html模板解析，我完全可以用MS的T4模板或者是StringTemplate等其他的模板来做，但是出于尝试和对Razor语发的感兴趣，便翻了翻Razor模板的资料，其CodePlex主页<a href="http://razorengine.codeplex.com/" title="http://razorengine.codeplex.com/">http://razorengine.codeplex.com/</a>。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 下面讲的都是一些其主页上面的例子，所以请大家别拍砖。别后面想到有些实际意义的例子在写个具体的运用例子吧。</p>

<pre><code>     public static class Razor 
    { 
        public static string Parse(string template, string name = null); 
        public static string Parse&lt;T&gt;(string template, T model, string name = null); 
        public static void SetLanguageProvider(ILanguageProvider provider); 
        public static void SetMarkupParser(MarkupParser parser); 
        public static void SetTemplateBaseType(Type type); 
    }
</code></pre>

<p>在Razor这个静态类中最重要的方法当然是我们的Parse方法了，其有两个重载，在第二个重载在我们可以传入Template的Model，了解asp.net mvc都会知道这个Model。同时我们可以用SetLanguageProvider方法传入LanguageProvider（C#、VB）等，SetTemplateBaseType传入模板BaseType（可能是我们的自定义类型）。</p>

<p>1：先来个简单的Template：</p>

<pre><code>static void Main(string[] args) 
           { 
               string template = "Hello @Model.Name! Welcome to Razor!"; 
               string result = Razor.Parse(template, new { Name = "World" });         
               Console.WriteLine(result); 
               Console.Read(); 
           }
</code></pre>

<p>输出结果：</p>

<p>Hello World! Welcome to Razor!</p>

<p>在这里我们传入的是new { Name = &ldquo;World&rdquo; }的匿名对象的Model。</p>

<p>2：内部嵌套方法：</p>

<pre><code>string template = @"@helper MyMethod(string name) {

    Hello @name

}

@MyMethod(Model.Name)! Welcome to Razor!"; 

string result = Razor.Parse(template, new { Name = "World" });
</code></pre>

<p> 输出同样是上边的结果，但是注意这里的与上面不同的是在{}中间的空格等是不会忽略的。我的理解是同样是一个模板的形式吧。</p>

<p>3：传递模板参数：</p>

<p>在传递参数的情况下我们可以采用自定义类，继承至TemplateBase 或者TemplateBase&lt;T&gt;，后者是带Model的情形。</p>

<p>还是官方的例子来看看，</p>

<pre><code>static void Main(string[] args) 
    { 
        Razor.SetTemplateBaseType(typeof(MyCustomTemplateBase&lt;&gt;));

        string template = "My name in UPPER CASE is: @ToUpperCase(Model.Name)"; 
        string result = Razor.Parse(template, new { Name = "Matt" });

        Console.WriteLine(result); 
        Console.Read(); 
    } 
} 
public abstract class MyCustomTemplateBase&lt;T&gt; : TemplateBase&lt;T&gt; 
{ 
    public string ToUpperCase(string name) 
    { 
        return name.ToUpper(); 
    } 
}
</code></pre>

<p>输出结果为：My name in UPPER CASE is: MATT。</p>

<p>在我们的MyCustomTemplateBase&lt;T&gt;抽象类中我们可以像MVC一样定义一些辅助属性和方法，像html、Request、Response等辅助类等</p>

<p>有事我们需要自定义一些非modle的非static property给Template，我的考虑是在TemplateService 中的重写Parse方法中初始化Action：
public string Parse&lt;T&gt;(string template, T model, string name = null，Action&lt;ITemplate&lt;dynamic&gt;&gt; initAction);</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2010/12/22/1913718.html" title="原文首发">原文首发请看这里</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/15/FCK-qu-diao-p-biao-qian-he-jia-Body-biao-qian/">FCK去掉p标签 和加Body标签</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-15T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2010/12/15/FCK-qu-diao-p-biao-qian-he-jia-Body-biao-qian/#disqus_thread"
             data-disqus-identifier="http://greengerong.github.io/blog/2010/12/15/FCK-qu-diao-p-biao-qian-he-jia-Body-biao-qian/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>如果您需要编辑模板页，默认的FCK设置是会去掉&lt;HTML&gt;&lt;/HTML&gt;&lt;BODY&gt;</p>

<p>&lt;/BODY&gt;标签，而且会给你加上&lt;P&gt;&lt;/P&gt;标签的，怎么办呢，只要设置一个小的</p>

<p>地方就可以了。在fckconfig里面有 FCKConfig.FullPage = false ;
改为 FCKConfig.FullPage = true
如果想去掉自动添加&lt;P&gt;的代码就可以在这里设置
默认是</p>

<pre><code>FCKConfig.EnterMode = 'p' ;   // p | div | br
FCKConfig.ShiftEnterMode = 'br' ; // p | div | br
</code></pre>

<p>改成</p>

<pre><code>FCKConfig.EnterMode = '' ;   // p | div | br
FCKConfig.ShiftEnterMode = 'br' ; // p | div | br   
</code></pre>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2010/12/15/1906959.html" title="原文首发">原文首发请看这里</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/13/wo-di-cheng-xu-ren-sheng-yu-yan-xue-xi-zhi-lu/">我的程序人生&#8211;语言学习之路</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-13T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2010/12/13/wo-di-cheng-xu-ren-sheng-yu-yan-xue-xi-zhi-lu/#disqus_thread"
             data-disqus-identifier="http://greengerong.github.io/blog/2010/12/13/wo-di-cheng-xu-ren-sheng-yu-yan-xue-xi-zhi-lu/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在这里总结一下我在语言学习之路。我是一个信息与计算科学的学习，属于应用数学，走上了程序员之路，回想起觉得有些诧异。我并不是科班出生的合格程序员。我走上这条道理也是一种偶然，或许该说是兴趣所致吧。在大学之前，我一个僻远山区的孩子，计算机这个东西碰都没有碰过得，记得高中会考时候连复制、新建这些简单操作都不知道的我，大学在第一个语言课C学习中感到了乐趣所在，在编写出每一个code，都能让我有一种自豪感。慢慢的我爱上的Code，又等到了两个老师的帮助，进入了某大企业实习。大二开始就在外边做项目，给我了许多程序基础理论和设计思想等方面的积累。使我的程序之路走的比较顺利，毕业时，虽然某些企业对我的经验有所怀疑。</p>

<p>&nbsp;&nbsp;&nbsp; 在大学语言的学习之路我学了好几门语言，在这里和大家一一分享下我的这条学习之路。</p>

<p>&nbsp;&nbsp;&nbsp; 按时间来说我接触的首先是c这门古老的语言，也是他带着我走上了这条程序之路。在刚学完C的时候我一个非科班的师弟（当时大一下期）在校程序大赛中拿的大奖，树立的我软件的梦想，虽然在毕业后有些徘徊，但是在学生期间对我的程序学习之路是很大的鼓励，当时我还学习的C的一些高级编程Socket等（现在已忘的差不多了），还参加了学校的单片机创新课题用C Show了一下，哈哈。下面是我当时的最后综合实验程序-多种排序集合：</p>

<pre><code> #include&lt;stdio.h&gt; 
        #define M  20

        void disp1(int *a,int n) 
        {    int i; 
        printf("\nsort before  :*****\n"); 
          for(i=1;i&lt;=n;i++) 
            printf(" %3d",a[i]); 
        }

        void disp2(int *a,int n) 
        { int i; 
          printf("\nsort after  :*****\n"); 
        for(i=1;i&lt;=n;i++) 
             printf(" %3d",a[i]); 
              a[0]=-1; 
        }

        void create(int *a,int *b,int  *n) 
        {int i; 
          printf("input the toall\n"); 
             scanf("%d",n); 
            for(i=1;i&lt;=*n;i++) 
            {  printf("input the %d\n",i); 
                scanf("%d",&amp;a[i]); 
                 b[i]=a[i]; 
              } 
           a[0]=b[0]=0; 
        }

        void  insertsort(int *a,int n) 
        { int i,j;

          for(i=2;i&lt;=n;i++) 
           {  a[0]=a[i]; 
             for(j=i-1;a[0]&lt;a[j];j--) 
                        a[j+1]=a[j]; 
                  a[j+1] =a[0]; 
            }

        }


        void xiersort(int *a,int n) 
        { int d[3]={5,3,1}; 
           int i,j,k=0;

           while(k&lt;3) 
        {  for(i=d[k]+1;i&lt;=n;i++) 
             {   a[0]=a[i]; 
                 for(j=i-d[k];j&gt;0&amp;&amp;a[j]&gt;a[0];j=j-d[k]) 
                        a[j+d[k]]=a[j]; 
                  a[j+d[k]]=a[0]; 
              } 
            k++; 
        }

        }


        void maopaosort(int *a,int n) 
        {  int i,j,change,t;

          for(i=1;i&lt;n;i++) 
           { change=0; 
               for(j=1;j&lt;=n-i;j++) 
                  if(a[j]&gt;a[j+1]) 
                      { t=a[j]; 
                         a[j]=a[j+1]; 
                          a[j+1]=t; 
                           change=1; 
                       }

               if(change==0) 
                           break; 
              } 
        }


        void quicksort(int *a,int t, int n) 
        {  int i=t,j=n;

          while(i&lt;j) 
        {   if(i&lt;j) 
            {   a[0]=a[i]; 
                 while(i&lt;j&amp;&amp;a[j]&gt;a[0]) 
                             j--; 
                 if(i&lt;j) 
                   {  a[i]=a[j]; 
                         i++; 
                     }

               while(i&lt;j&amp;&amp;a[i]&lt;a[0]) 
                             i++; 
                 if(i&lt;j) 
                   {  a[j]=a[i]; 
                         j--; 
                     } 
            } 
               a[i]=a[0]; 
             quicksort(a,1,i-1); 
             quicksort(a,i+1,n);

        } 
        }


        void jiandansort(int *a,int n) 
        { int i,j,t; 
          for(i=1;i&lt;n;i++) 
          { for(j=i+1;j&lt;=n;j++) 
               if(a[i]&gt;a[j]) 
               {  t=a[i]; 
                    a[i]=a[j]; 
                   a[j]=t; 
                } 
           } 
        }



        void main( ) 
        {int a[M+1],b[M+1],n=0,i; 
        char ch1='y',ch2; 
        create(a,b,&amp;n);

        while(ch1=='y'||ch1=='Y') 
        { printf("\n input 1---------  insert sort"); 
           printf("\n input 2---------  xi er sort"); 
           printf("\n input 3---------mao pao sort"); 
           printf("\n input 4---------  quick sort"); 
            printf("\n input 5--------  jian dan sort"); 
            printf("\n inputc(C)---------  creat"); 
            printf("\n input n(N)---------  exit\n");

            scanf("\n%c",&amp;ch2); 
             if(a[0]==-1) 
               for(i=1;i&lt;=n;i++) 
                 a[i]=b[i];

        switch(ch2) 
        { case  '1': disp1(a,n);     insertsort(a,n) ; 
                           disp2(a,n);      break; 
           case  '2': disp1(a,n);     xiersort(a,n); 
                            disp2(a,n);    break; 
           case  '3': disp2(a,n);     maopaosort(a,n); 
                           disp2(a,n);       break; 
           case  '4': disp1(a,n);    quicksort(a,1,n); 
                          disp2(a,n);      break; 
            case  '5':disp1(a,n);       jiandansort(a,n); 
                            disp2(a,n);     break; 
            case  'c': 
            case  'C':create(a,b,&amp;n);   break; 
            case  'n': 
            case  'N' :ch1='n'; 
        } 
        } 
        }
</code></pre>

<p> 现在看起代码是比较糟糕!</p>

<p>&nbsp; 接着我学习的汇编这门更古老的语言的，个人感觉汇编若只是说语法和学习，并不难。在这里也贴出我学习时候的一个打字游戏的小Code.</p>

<pre><code>    ;;;;任意掉落字符,按空格和ESC暂停并再ESC结束,空格继续;; 
    .model small 
    clear_screen macro op1,op2,op3,op4 ;清屏宏定义   
    push ax 
    push bx 
    push cx 
    push dx 
        mov ah,06h          
        mov al,00h 
        mov bh,06h 
        mov ch,op1 
        mov cl,op2 
        mov dh,op3 
        mov dl,op4 
        int 10h 
        mov ah,02h 
        mov bh,0h 
        mov dh,00h 
        mov dl,00h 
        int 10h 
    pop dx 
    pop cx 
    pop bx 
    pop ax 
    endm

    set  macro p1,p2,p3 ;;;设置光标并显示p1 
    push cx 
    mov ah,02h 
    mov bh,0h

    mov dx,p3 
    mov dh,p2 
    int 10h 
    mov ah,0ah 
    mov al,p1 
    mov cx,1 
    mov bl,12 
    int 10h 
    pop cx 
    endm

    delay macro;;;拖延时间 
    local sg1,sg2,nextdelay,nextdelay1 
    push cx 
    push dx 
    push  ax 
    mov dx,speed 
    mov cx,1000 
    sg1 : 
    sg2 : 
       loop sg2 
    dec dx 
    jnz sg2 
    mov ah,0bh 
    int 21h 
    cmp al,0h;;无字符可以读取 
    je nextdelay 
    mov ah,7 
    int 21h 
    cmp al,' ' 
    je calll 
    cmp al,1bh 
    jne nextdelay1 
    calll : 
    call justment 
      jmp  nextdelay 
    nextdelay1: 
    cmp al,letters[si] 
      jne  nextdelay 
      call disp 
    nextdelay: 
    pop ax 
    pop dx 
    pop  cx 
    endm

    menu  macro op1,op2,op3 ;菜单显示宏定义      
       mov ah,02h 
       mov bh,00h 
       mov dh,op1 
       mov dl,op2 
       int 10h 
       mov ah,09h 
       lea dx,op3 
       int 21h 
    endm


    .model 
    .stack 256 
    .data 
    letters db "jwmilzoeucgpravskntxhdyqfb" 
            db 'iytpkwnxlsvxrmofzhgaebudjq' 
            db 'nwimzoexrphysfqtvdcgljukdas' 
    count equ $-letters ;;79 
    menu0 db "Welcome to play !$"   
    menu1 db 'input enter to game!',0dh,0ah,'$' 
    menu2 db 'input space to halt!',0dh,0ah,'$' 
    menu3 db 'input esc to exit!',0dh,0ah,'$' 
    menu40 db 'this is agame which pritise keyin,',0dh,0ah,'$' 
    menu41    db ' when you are exit from the ' 
                     db 'game ,you will',0dh,0ah,'$' 
    menu42 db ' kown how much you can hit ',0dh,0ah,'$' 
    msg db 'choise speed:f--fast;s--slow;other character--orditional ! ' 
    msg0 db 'you hit:$' 
    msg1 db 'Help : space--- halt   Esc---home$' 
    speed dw  800 
    h dw ? 
    l  db ? 
    gs db 0 
    .code 
    mov ax,@data 
    mov ds,ax 
    menulist : 
    clear_screen 0d,00d,25d,79d  ;;24*80(0开始) 
    menu 07,20,menu0       ;菜单信息的宏调用 
             menu 09,20,menu1 
             menu 11,20,menu2 
             menu 13,20,menu3 
             menu 15,20,menu40 
             menu 17,22,menu41 
             menu 19,22,menu42 
    again: 
    mov ah,0 
    int 16h 
    cmp al,1bh 
      jne nextmain1 
    jmp overmain 
    nextmain1 : 
    cmp al,0dh 
    jne  again 
    clear_screen 0d,00d,25d,79d  ;;24*80(0开始) 
    call setspeed 
    clear_screen 0d,00d,25d,79d  ;;24*80(0开始) 
    menu 0,5,msg1;;help menu 
    mov dx,0 
    ag0: 
    call outdb 
    call rand 
    mov di,si 
    call rand 
      add di,si 
    shr di,1;;;列坐标 
    mov cx,1 
    call rand 
    push ax 
    mov ax,si 
      call rand 
      add si,ax 
      shr si,1;;;产生字符去两次的平均值 
    pop ax 
    ag : 
    mov h,di 
    mov l,cl 
    mov al,letters[si] 
    set al,cl,di 
      delay 
    dispag : 
    set ' ',cl,di 
      inc cx 
    cmp cx,23 
    je next 
    jmp ag 
    next : 
    inc dx 
    cmp dx,5 
    je  overmain 
    jmp ag0 
    overmain:


    call outdb 
    mov ah,4ch 
    int 21h

    ;;;;;; 
    rand proc 
    push ax 
    push bx 
    push cx 
    push dx 

    sti;允许中断1ah:0 
    mov ah,0 
    int 1ah 
    mov ax,dx 
    and  ah,0;;清除高6位 
    mov bl,count 
    div  bl 
    mov al,ah 
    mov ah,0 
    mov si,ax 
    pop dx 
    pop  cx 
    pop bx 
    pop ax 
    ret 
    rand endp 
    ;;;;;;;; 
    justment proc

    cmp al,' ' 
    call stop;;暂停

    ret 
    justment endp 
    ;;;;;;;;;;;;;;; 
    stop proc 
    ;;;;;;;;;;;;;;local agstop 
    agstop : 
    mov ah,0bh 
    int 21h 
    cmp al,0 
    je  agstop 
    mov ah,7 
    int 21h 
    cmp al,' ' 
    je overstop 
    cmp al,1bh 
    jne nextagstop1 
    jmp menulist 
    nextagstop1: 
    jmp agstop 
    overstop: 
    ret 
    stop endp

    ;;;; 
    disp proc 
    set ' ',l,h 
    inc gs 
    call ring

    call outdb 
    jmp ag0 
    ret 
    disp endp 
    ;;;;;;;;;; 
    outdb proc 
    push ax 
    push bx 
      push cx 
    push dx

    mov ah,02h 
       mov bh,0h 
       mov dh,0 
       mov dl,60 
       int 10h

    mov ah,9 
    mov dx,offset msg0 
    int 21h 
    mov al,gs

      mov ch,10 
    mov cl,0;记数 
    mov bh,0;;bh=0 
    agodb : 
      mov ah,0 
      div ch 
      mov bl,ah;;存余数入栈 
       add bl,'0' 
    push bx 
       inc cl 
       cmp al,0 
        jg agodb 
      mov ch,0

    agodb1 : 
    pop bx 
    mov dx,bx 
    mov ah,2 
    int 21h 
    loop agodb1

    ;;mov dl,0dh 
    ;; mov ah,2 
    ;;int 21h 
    ;; mov dl,0ah 
    ;; mov ah,2 
    ;;int 21h

    pop dx 
    pop cx 
    pop bx 
    pop ax 
    ret 
    outdb endp 
    ;;;;;;;;;;;;;; 
    setspeed proc 
    push ax 
    menu 15,5,msg 
    mov  ah,1h 
    int 21h 
    cmp al,'f' 
    je nextspeed1 
    cmp al,'s' 
      jne nextspeed2 
    mov speed,1000 
    jmp  nextspeed2 
    nextspeed1 : 
    mov speed,500 
    nextspeed2: 
    pop ax 
      ret 
    setspeed endp

    ;;;;;;;;;;;;; 
    ring proc 
    push ax 
    push cx 
    push dx

    mov cx,3 
    ringed : 
    mov ah,02h 
    mov dl,07h 
    int 21h 
    clear_screen 1d,00d,25d,79d  ;;24*80(0开始) 
    loop ringed 
    pop dx 
    pop cx 
    pop ax 
    ret 
    ring endp

    end
</code></pre>

<p>&nbsp;&nbsp;&nbsp;&nbsp; 紧接着遇见的上面说的两位老师他们用的是c#语言，和他们一起做些小开发，所以我也走上了,NET之路，刚开始做了几个Web的开发。其中一个老师是某企业的架构师，所以在他的帮助和介绍下，我和他一同学习并进入企业实习，做了一些Winform的开发，平时空闲的时候就在老师的指导下位他的快速开发平台，添加一些新东西，改进等工作。那时虽然辛苦一些，但是过的挺充实的，读书的时候还有比较好的外快，挺兴奋的。同时，我也没有拉下一门课程学习，虽然经常不去上课，老师们都挺支持和理解我的，期末时考试也考得很好。在这里我感谢每一位关心和支持我的老师们，你们辛苦了。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp; 在.NET平台上C#肯定和必备的，在这里也挑不出来典型的code展示，同时在,NET平台的唯一函数式编程语言出来后，我带着多函数式思想的理解的心情，学习了这门语言，第一次感觉到函数式编程的魅力所在，并不是写一些code（博客里贴出了两篇<a href="http://www.cnblogs.com/whitewolf/archive/2010/11/29/1891322.html"><font color="#6699cc">F#初试（2）</font></a> 、<a href="http://www.cnblogs.com/whitewolf/archive/2010/07/14/1777408.html"><font color="#6699cc">F#初试&mdash;打印目录文件树</font></a>）。&nbsp;&nbsp;&nbsp;</p>

<p>&nbsp;&nbsp;&nbsp; 后来我也学习了我们的面向对象的语言C++，Java，MathLab（对于数学专业的尅定是必须的，呵呵）。在c++学习时候学的感觉挺好的，但是到了准备学习MFC，看着他的函数名称等一大堆的字母，比起C#是难，这是我的c#也学得有一定基础，所以我放弃了。对于Java我还是很指着的学习了一段时间，会Java Bean，model1的开发，但只能说是基础的，当时让我苦恼的是Java一大堆的东西需要自己手工配置，还有就是那个IDE的智能提示速度让人还郁闷.绕了一圈还是继续我的.NET之路，因为在外边我所做的都是基于c# WinForm的开发，它有一个优秀的类库和IDE支持。虽然我没有继续Java，c++的学习，但是我觉得他们也是很优秀的，并不比c#差。对于一个程序不管你是c#，Java编写的能满足客户需求就是一个好的code，程序只是各种语言抒写的艺术，不该存在语言之争。毕业之时我希望走的c的编程，但是没有这样的基于，还有就是.NET已经具有了一定基础，更好找工作些，如果有机会我觉得我还想走c的编程，前提是工资与我.NET持平，呵呵。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp; 本想写的好些，但是我的文字功底太差了，构思的时候挺多的，一到写的时候感觉痛困难的，需要多多练习。请大家多多指教。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp; 随笔收尾了，虽然现实与梦想存在差距，但是我的程序之路然在继续&#8230;</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2010/12/13/1904361.html" title="原文首发">原文首发请看这里</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/29/F-chu-shi-2/">F#初试（2）</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-29T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2010/11/29/F-chu-shi-2/#disqus_thread"
             data-disqus-identifier="http://greengerong.github.io/blog/2010/11/29/F-chu-shi-2/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>&nbsp; 这里只是几个f#简单的算法应用，请各位别怕砖。</p>

<pre><code>    代码

    Code highlighting produced by Actipro CodeHighlighter (freeware)http://www.CodeHighlighter.com/--&gt; 1 // Learn more about F# at http://fsharp.net

    #light
    open System


    //简单的网页抓取
    open System.Text
    open System.IO
    open System.Net
    let http (url:string)=
        let request=System.Net.WebRequest.Create(url)
        let response=request.GetResponse()
        let stream=response.GetResponseStream()
        let reader=new System.IO.StreamReader(stream)
        let html =reader.ReadToEnd();
        html
    printfn "%s" (http "http://www.google.com")

    //汉罗塔问题：
    let rec HanLiTa n a b c =
        match n with
        | 1 -&gt; printfn " Move %s to %s ;"  a c
        | num -&gt;  HanLiTa (num-1) a c b ;HanLiTa 1 a b c ; HanLiTa (num-1) b a c ;

    let n=4
    printfn "HanLiTa start (%d):" n
    HanLiTa n "A" "B" "C"

    //Fibonacci基数

    let rec Fib n = 
        match n with
        |2 |1 -&gt; 1
        |i when i &gt;1 -&gt; Fib (i-1) + Fib (i-2)
        |x  when x&lt;= 0 -&gt; failwith " you should input a Interger;"

    let fibn=5    
    printfn "Fibonacci %d : %d"     fibn (Fib fibn)


    //杨辉三角
    let rec combi n r =
        let p=ref 1;
        [1 .. r] |&gt; List.iter(fun g -&gt;  p:=!p*(n-g+1)/g );
        !p

    let CombiPrint N=
        [0 .. N] |&gt;
             List.iter(fun g -&gt; ([0 .. g] |&gt;
                                        List.iter(fun h-&gt; 
                                                    if h=0 then 
                                                        [0..(N-g)] |&gt;
                                                                 List.iter(fun s-&gt;printf "  ") ; 
                                                    printf "%5d" (combi g h));
                            printf "\r\n"));

    printfn "\r\n杨辉三角:"
    CombiPrint 10


    Console.Read() |&gt;ignore
</code></pre>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2010/11/29/1891322.html" title="原文首发">原文首发请看这里</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/12/VS-shu-chu-chuang-kou-output-view-di-xiao-ji-qiao-wen-jian-hang-hao-zi-fu-ding-wei/">VS输出窗口（output View）的小技巧&#8211;文件行号字符定位</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-12T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2010/11/12/VS-shu-chu-chuang-kou-output-view-di-xiao-ji-qiao-wen-jian-hang-hao-zi-fu-ding-wei/#disqus_thread"
             data-disqus-identifier="http://greengerong.github.io/blog/2010/11/12/VS-shu-chu-chuang-kou-output-view-di-xiao-ji-qiao-wen-jian-hang-hao-zi-fu-ding-wei/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在我们的调试输出到VS输出窗口的信息，有时候我们想要鼠标点击就定位该该文件，改行，甚至该列。在强大的VS工具中已经给我们提供了这个功能，我们只需要把输出到输出窗</p>

<p>口的字符串就是一定的格式化就可以了。c#在VS输出窗口格式为：
文件名称（行号，列号）:消息信息。
比如我 test.cs（100，78）:消息信息。就是对应我们的test.cs文件的100行78个字符。
在这里我写了一个简单异常输出信息的扩展类。
代码具体如下：&nbsp;&nbsp;&nbsp;</p>

<pre><code>     代码 

    Code highlighting produced by Actipro CodeHighlighter (freeware)http://www.CodeHighlighter.com/--&gt;public class OutPutExceptionEx
        {
            public static void WriteLine(string message, Exception ex)
            {
                System.Diagnostics.StackTrace st = new System.Diagnostics.StackTrace(ex, true);
                System.Diagnostics.StackFrame frm = st.GetFrame(0);
                if (frm != null)
                {
                    System.Diagnostics.Debug.WriteLine(string.Format("{0}({1},{2}):{3})", frm.GetFileName(), frm.GetFileLineNumber(), frm.GetFileColumnNumber(), 

    message));
                }

            }

            public static void WriteLine(Exception ex)
            {
                WriteLine(ex.Message, ex);
            }

            public static void Write(string message, Exception ex)
            {
                System.Diagnostics.StackTrace st = new System.Diagnostics.StackTrace(ex, true);
                System.Diagnostics.StackFrame frm = st.GetFrame(0);
                if (frm != null)
                {
                    System.Diagnostics.Debug.Write(string.Format("{0}({1},{2}):{3})", frm.GetFileName(), frm.GetFileLineNumber(), frm.GetFileColumnNumber(), 

    message));
                }

            }

            public static void Write(Exception ex)
            {
                Write(ex.Message,ex);
            }
        }

    //测试
        class Program
        {
            static void Main(string[] args)
            {

                try
                {
                    throw new Exception("这个发生了一个错误！");
                }
                catch (Exception ex)
                {
                    OutPutExceptionEx.Write(ex);
                }

                Console.WriteLine("ok");
                Console.Read();           
            }
    }
</code></pre>

<p>图片效果：</p>

<p><img src="http://images.cnblogs.com/cnblogs_com/whitewolf/201011121051.jpg" alt="" /></p>

<p>2：</p>

<p><img src="http://images.cnblogs.com/cnblogs_com/whitewolf/2010111210512.jpg" alt="" /></p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2010/11/12/1875473.html" title="原文首发">原文首发请看这里</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/11/MEF-xue-xi-bi-ji/">MEF学习笔记</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-11T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2010/11/11/MEF-xue-xi-bi-ji/#disqus_thread"
             data-disqus-identifier="http://greengerong.github.io/blog/2010/11/11/MEF-xue-xi-bi-ji/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>&nbsp;&nbsp;&nbsp; MEF是 Managed Extensibility Framework简称，在计算机的世界什么都会加一个简称，这我们大家已经司空见惯了。从名字我们可以知道它是一个用于管理的可扩展性框架。这是和EL不同的另一种IOC方式;</p>

<p>&nbsp;&nbsp; MEF 为我们提供了一种运行时的扩展，具体应用在对象的实例化。它有目录（AssemblyCatalog）和容器（CompositionContainer）组成，他有输入输出（Exports和Imports）元数据标记，在对象实例化的时候会自动匹配这个契约。</p>

<p>下面是官方的一个展示图：</p>

<p><a href="http://images.cnblogs.com/cnblogs_com/whitewolf/Windows-Live-Writer/0291ec4c7408_12966/untitled.png"><img src="http://images.cnblogs.com/cnblogs_com/whitewolf/Windows-Live-Writer/0291ec4c7408_12966/untitled_thumb.png" title="untitled" alt="untitled" /></a></p>

<p>由CompositionContainer来管理我们的多个可组合部件。</p>

<p>下面我们来一个简单的示例来初步了解MEF:</p>

<p>控制台程序：</p>

<pre><code>     代码 

    Code highlighting produced by Actipro CodeHighlighter (freeware)http://www.CodeHighlighter.com/--&gt;using System; 
    using System.Collections.Generic; 
    using System.Linq; 
    using System.Text; 
    using System.ComponentModel.Composition;//添加引用 



    namespace MEFTest 
    { 
        public interface ILog 
        { 
            void Write(string message); 
        } 

        [System.ComponentModel.Composition.Export(typeof(ILog))] 
        public class ConsoleLog:ILog 
        { 
            public void Write(string message) 
            { 
                Console.WriteLine("Hello:"+message); 
            } 
        } 
        class Program 
        { 
            [System.ComponentModel.Composition.Import(typeof(ILog))] 
            public ILog Log; 
            static void Main(string[] args) 
            { 
                Program pro = new Program(); 
                pro.Init(); 
                pro.Log.Write("Test"); 
                Console.Read(); 
            }

            public void Init() 
            { 
                var assem = System.Reflection.Assembly.GetExecutingAssembly();//当前程序集 
                var assemcat = new System.ComponentModel.Composition.Hosting.AssemblyCatalog(assem);//构建目录 
                var container = new System.ComponentModel.Composition.Hosting.CompositionContainer(assemcat);//构建容器 
                container.ComposeParts(this);//这是一个System.ComponentModel.Composition.AttributedModelServices 的扩展方法。 
            } 
        } 
    }
</code></pre>

<p>输出为：</p>

<p>Hello:Test</p>

<p>ExportAttribute 定义如下：</p>

<pre><code>     代码 

    Code highlighting produced by Actipro CodeHighlighter (freeware)http://www.CodeHighlighter.com/--&gt;[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method | AttributeTargets.Property | AttributeTargets.Field, AllowMultiple = true, Inherited = false)] 
    public class ExportAttribute : Attribute 
    { 

        [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")] 

        [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")] 

        [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")] 
        public ExportAttribute(Type contractType); 

        public ExportAttribute(string contractName, Type contractType);


        public string ContractName { get; } 

        public Type ContractType { get; } 
    }
</code></pre>

<p>从他的定义我们可以知道他可以运用于我们的类、方法、属性、字段，并且可以多继承，但是不存在从父类的继承特性。</p>

<p>他有三种不同的标记方式方式.在MEF中这里标记为可以导出，即注入到Import。</p>

<p>ImportAttribute 定义：</p>

<pre><code>     代码 

    Code highlighting produced by Actipro CodeHighlighter (freeware)http://www.CodeHighlighter.com/--&gt;[AttributeUsage(AttributeTargets.Property | AttributeTargets.Field | AttributeTargets.Parameter, AllowMultiple = false, Inherited = false)] 
        public class ImportAttribute : Attribute, IAttributedImport 
        { 

            [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")] 
            public ImportAttribute(); 

            [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")] 
            public ImportAttribute(string contractName); 

            [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")] 
            public ImportAttribute(Type contractType); 

            public ImportAttribute(string contractName, Type contractType); 

            public bool AllowDefault { get; set; }

            public bool AllowRecomposition { get; set; } 

            public string ContractName { get; } 

            public Type ContractType { get; } 

            public CreationPolicy RequiredCreationPolicy { get; set; } 
        }
</code></pre>

<p>&nbsp;同上Export,这里标记为可被Export注入的接口点。</p>

<p>今天就写到这里了，希望大家多多指教，大家一起共同进步。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2010/11/11/MEF1.html" title="原文首发">原文首发请看这里</a></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/12/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/10/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>破 狼</h1>
  <p>    那一夜，我听了一宿梵唱，不为参悟，只为寻你的一丝气息。 那一月，我转过所有经轮，不为超度，只为触摸你的指纹。 那一年，我磕长头拥抱尘埃，不为朝佛，只为贴着了你的温暖。 那一世，我翻遍十万大山，不为修来世，只为路中能与你相遇。 那一瞬，我飞升成仙，不为长生，只为佑你平安喜乐。<a href="http://greengerong.github.io/blog/2009/12/24/cang-yang-jia-cuo-na-yi-tian-na-yi-yue-na-yi-nian-na-yi-shi/">《那一天，那一月，那一年，那一世》&#8211;仓央嘉措。</a></p>
</section>
<section>
  <p style="align: center"><a href="http://www.amazingcounters.com"><img border="0" src="http://cc.amazingcounters.com/counter.php?i=3158890&amp;c=9476983" alt="count web site visits"/></a></p>
</section>
<section>
<h1>博客友情链接</h1>
  <ul>
    <li><a href="http://www.cnblogs.com/whitewolf/">博客园-破狼</a></li>
    <li><a href="http://whitewolfblog.blog.51cto.com/">51CTO&#8211;破狼</a></li>
    <li><a href="http://www.davenkin.me/">无知者云</a></li>
    <li><a href="http://agiledon.github.io/">简单文本</a></li>
  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/12/10/light-ioc-guice-framework/">java轻量级IOC框架Guice</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/11/27/guava-eventbus/">Guava - EventBus(事件总线)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/11/21/guava-bing-xing-bian-cheng-futures/">Guava - 并行编程Futures</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/11/20/nightmareji-yu-phantomjsde-zi-dong-hua-ce-shi-tao-jian/">Nightmare基于phantomjs的自动化测试套件</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/11/17/typescript-classes/">TypeScript - Classes</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/11/13/typescript-interfaces/">TypeScript - Interfaces</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/11/13/typescript-basic-types/">TypeScript - 基本类型系统</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/11/12/vsftpd-refusing-to-run-with-writable-root-inside-chroot/">Vsftpd Refusing to Run With Writable Root Inside Chroot</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/greengerong">@greengerong</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'greengerong',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - 破 狼 -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'greengerong';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
