
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<<<<<<< HEAD
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <title>破狼 Blog</title>
    <meta name="author" content="破 狼"> 
    <meta name="description" content="&nbsp; &nbsp; &nbsp;在项目开发中自定义了一个maven plugin，在本地能够很好的工作，但是在ci server上却无法正常工作报错为： ----------------------------------------------------- at org.apache. &hellip;"> 
    <!-- http://t.co/dKP3o1e -->
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="canonical" href="http://greengerong.github.io/blog/page/9">
    <link href="/favicon.png" rel="icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/atom.xml" rel="alternate" title="破狼 Blog" type="application/atom+xml">
    <script src="/javascripts/modernizr-2.0.js"></script>
    <script src="//cdn.bootcss.com/jquery/1.9.1/jquery.min.js"></script>
    <script>
    !window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))
    </script>
    <script src="/javascripts/octopress.js" type="text/javascript"></script>
    <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
 
=======
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>破狼 Blog</title>
  <meta name="author" content="破 狼">

  
  <meta name="description" content="&nbsp;&nbsp;&nbsp; 今天在操作Excel2003时候在我的win7英文操作系统发生错误，（在此记录下来）： The &lsquo;Microsoft.Jet.OLEDB.4.0&rsquo; provider is not registered on the local &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://greengerong.github.io/blog/page/9">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="破狼 Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  


<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa24b16b917fd5e88f6d6dd10dc673619' type='text/javascript'%3E%3C/script%3E"));
</script>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">破狼 Blog</a></h1>
  
    <h2>Write less got more.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:greengerong.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
<<<<<<< HEAD
      <h1 class="entry-title"><a href="/blog/2013/09/10/ji-lu-maven-java-lang-String-cannot-be-cast-to-XX-error/">记录maven java.lang.String Cannot Be Cast to XX Error</a></h1>
=======
      <h1 class="entry-title"><a href="/blog/2011/01/01/The-Microsoft-Jet-OLEDB-4-0-provider-is-not-registered-on-the-local-machine-Excel2003/">The &#x27;Microsoft.Jet.OLEDB.4.0&#x27; Provider Is Not Registered on the Local machine-Excel2003</a></h1>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
    
    
      <p class="meta">
        








  


<<<<<<< HEAD
<time datetime="2013-09-10T00:00:00+08:00" pubdate data-updated="true"></time>
=======
<time datetime="2011-01-01T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2011/01/01/The-Microsoft-Jet-OLEDB-4-0-provider-is-not-registered-on-the-local-machine-Excel2003/#disqus_thread"
             data-disqus-identifier="http://greengerong.github.io/blog/2011/01/01/The-Microsoft-Jet-OLEDB-4-0-provider-is-not-registered-on-the-local-machine-Excel2003/">Comments</a>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
        
      </p>
    
  </header>


<<<<<<< HEAD
  <div class="entry-content"><p>&nbsp; &nbsp; &nbsp;在项目开发中自定义了一个maven plugin，在本地能够很好的工作，但是在ci server上却无法正常工作报错为：</p>

<div class="cnblogs_Highlighter">
<pre class="brush:java;gutter:false;">-----------------------------------------------------

         at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:225)
         at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
         at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
         at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
         at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
         at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
         at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
         at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
         at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
         at org.jvnet.hudson.maven3.launcher.Maven3Launcher.main(Maven3Launcher.java:79)
         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
         at java.lang.reflect.Method.invoke(Method.java:601)
         at org.codehaus.plexus.classworlds.launcher.Launcher.launchStandard(Launcher.java:329)
         at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:239)
         at org.jvnet.hudson.maven3.agent.Maven3Main.launch(Maven3Main.java:146)
         at hudson.maven.Maven3Builder.call(Maven3Builder.java:127)
         at hudson.maven.Maven3Builder.call(Maven3Builder.java:74)
         at hudson.remoting.UserRequest.perform(UserRequest.java:118)
         at hudson.remoting.UserRequest.perform(UserRequest.java:48)
         at hudson.remoting.Request$2.run(Request.java:326)
         at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
         at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
         at java.util.concurrent.FutureTask.run(FutureTask.java:166)
         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
         at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.maven.plugin.PluginExecutionException: A type incompatibility occured while executing [group id]:[artifact id]:[version]:start: java.lang.String cannot be cast to java.io.File
-----------------------------------------------------
</pre>
</div>


<p>&nbsp; &nbsp; &nbsp; 在花费了我大半的时间，将本地环境的maven，jdk等设为和ci一致后最后定位到maven的版本问题，其终究原因是因为maven在3.0.3才支持配置参数为泛型集合(List&lt;T&gt;,Set&lt;T&gt;&hellip;)，在3.0.2及一下本班不支持此写法。</p>

<p>&nbsp; &nbsp; &nbsp;修改次error的方法有两种：</p>

<ol>
<li>将ci Server的maven更新到3.0.3以上。(但是在我们的ci server更新有些困难，还有本人认为如果写一个plugin只能工作的固定version，这和一个废物差不多，所以选择了第二种方法)。</li>
<li>将泛型集合List&lt;T&gt;改为Array T[]。（项目中某大神写的List&lt;File&gt;我轻易的改为File[].在执行前改为Arrays.asList(XXX)）;</li>
</ol>


<p>&nbsp; &nbsp; &nbsp;一切搞定。在此记录希望对于遇见同类问题的人有所帮助。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2013/09/10/3313515.html" title="原文首发">原文首发请看这里</a></p>
=======
  <div class="entry-content"><p>&nbsp;&nbsp;&nbsp; 今天在操作Excel2003时候在我的win7英文操作系统发生错误，（在此记录下来）：</p>

<p>The &lsquo;Microsoft.Jet.OLEDB.4.0&rsquo; provider is not registered on the local machine.</p>

<p>在网上google了一下，错误原因是我的机子是64编译的，需要改为32位，在vs中设置将编译Any CPU改为x86，就ok。</p>

<p><img src="http://images.cnblogs.com/cnblogs_com/whitewolf/QQ%E6%88%AA%E5%9B%BE%E6%9C%AA%E5%91%BD%E5%90%8D.png" alt="The " /></p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2011/01/01/1923744.html" title="原文首发">原文首发请看这里</a></p>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
<<<<<<< HEAD
      <h1 class="entry-title"><a href="/blog/2013/07/01/sublime-2-for-mac-link-to-command/">Sublime 2 for Mac Link to Command</a></h1>
=======
      <h1 class="entry-title"><a href="/blog/2010/12/23/dai-ma-sheng-cheng-ji-shu-CodeDom-VS-T4/">代码生成技术&#8211;CodeDom vs T4</a></h1>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
    
    
      <p class="meta">
        








  


<<<<<<< HEAD
<time datetime="2013-07-01T00:00:00+08:00" pubdate data-updated="true"></time>
=======
<time datetime="2010-12-23T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2010/12/23/dai-ma-sheng-cheng-ji-shu-CodeDom-VS-T4/#disqus_thread"
             data-disqus-identifier="http://greengerong.github.io/blog/2010/12/23/dai-ma-sheng-cheng-ji-shu-CodeDom-VS-T4/">Comments</a>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
        
      </p>
    
  </header>


<<<<<<< HEAD
  <div class="entry-content"><p><span>Sublime command for mac :</span></p>

<p><span>execute those command:</span></p>

<p><span>sudo ln -s /Applications/Sublime\ Text\ 2.app/Contents/SharedSupport/bin/subl /usr/local/bin/sublime</span></p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2013/07/01/3165484.html" title="原文首发">原文首发请看这里</a></p>
=======
  <div class="entry-content"><p>&nbsp;&nbsp;&nbsp;&nbsp; 在微软的自家代码生成方案中我们有两种选择方式:CodeDom 和Text Template Transformation Toolkit（T4）模板。同样我们可以利用简单的String或者StringBuilder来拼接字符串，但是那对于简单的还可以，但是对于复杂的问题就<img src="http://images.cnblogs.com/cnblogs_com/whitewolf/201012/201012231245237287.png" alt="悲伤" />。其实在ASP.NET MVC 3.0中有多处了一个更简洁语法的模板-Razor，我们同样可以运用于我们自己的代码生成中，我随便有一篇简单的介绍<a href="http://www.cnblogs.com/whitewolf/archive/2010/12/22/1913718.html">Razor Templating Engine</a>，在以后有机会了会写Razor Demo。今天的主题不在这里，所以不多说了。</p>

<h3>一：简介：</h3>

<p>CodeDom：这 个类库出现在我们的.NET Framework 2.0，并且被深深的用于我们的ASP.NET项目中。CodeDom关注于一个语言独立性，以至于我们可以利用我们熟悉的语言（c#，vb等）构建一个CodeDom Model Tree,就可以生成我们在.NET平台所支持的语言代码。对于我们的ASP.NET要求语言的独立。</p>

<p>T4：T4模板作为VS2008的一部分出现，他以&lt;# #&gt; 、&lt;#= #&gt;接近于ASP.NET的语言在模板中插入一段段的动态代码块，可以像asp或者ASP.NET一样简单的更让人贴切，相对于CodeDom就更简洁，但是没有了语言层次的抽象，不具有语言独立性，我们必须为同一个功能的模板在不同的语言上写不同的模板，但是在开发中往往c#模板就足够了，以及更简单化所以得到了更多人的青睐。</p>

<p>二：Code Demo：</p>

<p>下面我们将用CodeDom和t4分别生成一个简单的Code，根据时间输出不同的问候，如下：</p>

<p>1：CodeDom Code:</p>

<pre><code>using System; 
using System.Text; 
using System.CodeDom; 
using System.IO;

namespace RazorDemo 
{ 
    public class CodedomDemo 
    { 
        public CodeCompileUnit CrateCodeCompileUnit() 
        { 
            var testClass = new CodeTypeDeclaration("Test"); 
            var testMeth = new CodeMemberMethod() 
            { 
                Attributes = MemberAttributes.Public| MemberAttributes.Final, 
                Name = "SayHello", 
            }; 
            var param = new CodeParameterDeclarationExpression(new CodeTypeReference(typeof(string)), "name"); 
            testMeth.Parameters.Add(param); 
            testClass.Members.Add(testMeth);

            var nowExpression = new CodePropertyReferenceExpression(new CodePropertyReferenceExpression(new CodeTypeReferenceExpression(typeof(DateTime)), "Now"), "Hour"); 
            var assmon = new CodeBinaryOperatorExpression(new CodePrimitiveExpression("早上好:"), CodeBinaryOperatorType.Add, new CodeArgumentReferenceExpression("name") ); 
            var asslunch = new CodeBinaryOperatorExpression(new CodePrimitiveExpression("中午好:"), CodeBinaryOperatorType.Add, new CodeArgumentReferenceExpression("name")); 
            var assAfternoon = new CodeBinaryOperatorExpression(new CodePrimitiveExpression("下午好:"), CodeBinaryOperatorType.Add, new CodeArgumentReferenceExpression("name")); 
            var codecondition = new CodeConditionStatement(new CodeBinaryOperatorExpression( 
                nowExpression, CodeBinaryOperatorType.LessThanOrEqual, new CodePrimitiveExpression(10)), 
                new CodeStatement[] { new CodeExpressionStatement(new CodeMethodInvokeExpression(new CodeTypeReferenceExpression(typeof(Console)), "WriteLine", assmon)) },           //true:if(DateTime.Now&lt;=10) 
                //else 
                new CodeStatement[] 
                { 
                   new CodeConditionStatement(new CodeBinaryOperatorExpression(nowExpression, CodeBinaryOperatorType.LessThanOrEqual,new CodePrimitiveExpression(14) ),  // else if(DateTime.Now&lt;=14) 
                     new CodeStatement[] { new CodeExpressionStatement(new CodeMethodInvokeExpression(new CodeTypeReferenceExpression(typeof(Console)), "WriteLine",asslunch))},    //true 
                     new CodeStatement[] { new CodeExpressionStatement(new CodeMethodInvokeExpression(new CodeTypeReferenceExpression(typeof(Console)), "WriteLine",assAfternoon))}) //fasle 
                } 
               );

            testMeth.Statements.AddRange(new CodeStatement[] {             
            codecondition 
            });

            var ns = new CodeNamespace("Wolf"); 
            ns.Imports.Add(new CodeNamespaceImport("System")); 
            ns.Types.Add(testClass); 
            var util = new CodeCompileUnit(); 
            util.Namespaces.Add(ns); 
            return util; 
        }

        public string Genertor(string language) 
        { 
            StringBuilder sb = new StringBuilder(); 
            StringWriter sw = new StringWriter(sb); 
            System.CodeDom.Compiler.CodeDomProvider.CreateProvider(language).GenerateCodeFromCompileUnit( 
                this.CrateCodeCompileUnit(), sw, new System.CodeDom.Compiler.CodeGeneratorOptions() 
                { 
                    ElseOnClosing = true, 
                    IndentString = "    " 
                }); 
            sw.Close(); 
            return sb.ToString();

        } 
    } 
}
</code></pre>

<p>2:T4 Code：</p>

<pre><code>&lt;#@ template language="C#" #&gt;

using System; 
namespace WolfT4 {   
    public class Test {

        public void SayHello(string name) { 
            &lt;# if(System.DateTime.Now.Hour&lt;=10){#&gt; 
            System.Console.WriteLine(("早上好:" + name)); 
            &lt;#} else if(System.DateTime.Now.Hour&lt;=14){#&gt; 
            System.Console.WriteLine(("中午好:" + name)); 
            &lt;#} else{ #&gt; 
            System.Console.WriteLine(("下午好:" + name)); 
            &lt;#}#&gt;            
        } 
    } 
}
</code></pre>

<p>&nbsp;三：总结：</p>

<p>CodeDom的优势：</p>

<p>1：具有语言层次抽象，独立性：是一个单语言开发，多语言生成的方式。</p>

<p>2：<strong>Framework </strong>的支持：作为我们的.NET Framework 一部分出现的，位于System.CodeDom命名空间下。不需要想T4 模板一样引用Microsoft.VisualStudio.TextTemplating.dll</p>

<p>T4优势：</p>

<p>1：更加贴切：采用的是类似于ASP、ASP.NET的语言块，是的我们的开发更贴切，采用模板方式更加简洁，快速。</p>

<p>2：可维护性：由于是基于文件，不像codedom编译成为dll方式，我们可以随时修改Template文件、重构。</p>

<p>&nbsp;</p>

<p>其实我觉得只要是不要求语言独立性，多语言生成的话，就采用T4或者Razor等模板。</p>

<p>代码生成技术（目前完成，还在继续，好久没写了&hellip;）：</p>

<p>1：<a href="http://www.cnblogs.com/whitewolf/archive/2010/07/09/1774279.html"><font color="#6699cc">CodeDom系列目录</font></a></p>

<p>2：<a href="http://www.cnblogs.com/whitewolf/archive/2010/09/27/1836729.html"><font color="#6699cc">CodeSmith模板引擎系列-目录</font></a></p>

<p>3：<a href="http://www.cnblogs.com/whitewolf/archive/2010/12/22/1913718.html"><font color="#6699cc">Razor Templating Engine</font></a></p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2010/12/23/1914700.html" title="原文首发">原文首发请看这里</a></p>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
<<<<<<< HEAD
      <h1 class="entry-title"><a href="/blog/2013/06/30/yu-yan-she-ji-zhong-di-ya-zi-lei-xing-feng-ge/">语言设计中的鸭子类型风格</a></h1>
=======
      <h1 class="entry-title"><a href="/blog/2010/12/22/Razor-Templating-Engine/">Razor Templating Engine</a></h1>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
    
    
      <p class="meta">
        








  


<<<<<<< HEAD
<time datetime="2013-06-30T00:00:00+08:00" pubdate data-updated="true"></time>
=======
<time datetime="2010-12-22T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2010/12/22/Razor-Templating-Engine/#disqus_thread"
             data-disqus-identifier="http://greengerong.github.io/blog/2010/12/22/Razor-Templating-Engine/">Comments</a>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
        
      </p>
    
  </header>


<<<<<<< HEAD
  <div class="entry-content"><p>&nbsp; &nbsp; &nbsp; 在动态语言的世界里一直流传着一种叫做鸭子类型的风格，其来自谚语：&ldquo;如果行鸭子一样走路，像鸭子一样呱呱叫，那它就是一只鸭子&rdquo;。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp; 从鸭子类型，我们可以联想到它的推导，并不在乎类型的真正实体，只要他的行为有鸭子的特性，那么我们就可以把它当做一只鸭子来看到。在动态语言设计中，可以解释为无论一个对象是什么类型的，只要它具有某类型的行为（方法），则它就是这一类型的实例，而不在于它是否显示的实现或者继承。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp; 鸭子类型在动态语言中被广为奉行。某类接口需要一个log接口，换句话说这借口中需要调用传入对象的log，方法，在动态语言中无论你传入的是什么对象，只有具有log方法则就是合法的。而java，c#这类静态强类型语言（当前首先声明c#已经不是纯的静态强类型语言，它具有dynamic，表达式，当然这里所说的c#是去掉这类特性，或者说C#2.0吧）我们传入的对象是必须显示实现该接口的类实例，他们直接必须具有显示的继承链。</p>

<p>&nbsp;&nbsp; &nbsp;&nbsp;以上所说的是两类语言设计中的对抽象的制约的区别。</p>

<p>&nbsp;&nbsp;&nbsp; Javascript中鸭子型的实现：</p>

<div class="cnblogs_code">
<pre class='green'><span style="color: #0000ff;">function</span><span style="color: #000000;"> log(logger){

       logger.log(&ldquo;hello world&rdquo;)；

}

log({log:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(msg){

       console.log(msg);

}});</span></pre>
</div>


<p>&nbsp;</p>

<p>代码量很少，这里只是一种简单的约定，而不是强制，使得我们的自控感增强，所以我喜欢javascript这门语言给我的自由度。但是相对于java这类静态强类型语言而言是将语法的检查推向了运行时期，延迟了发现问题的时间，不助于我们的调试。在强类型系统的语言中由于具有完备的类型信息，我们可以提高良好的IDE于开发时限制，有助于我们的大规模开发。所以这里没有对错，只是看你的选择和喜爱。如果你是一个优秀的程序员，动态语言这种检查的推迟对你并无什么问题，因为你能够有条理次序的节奏型开发。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp; 关于鸭子型风格这里还得必须提到go语言，也是go语言带来我对这种风格的思考。</p>

<p>我们还可以显示的定义在消费者方法中，形如&nbsp;</p>

<div class="cnblogs_code">
<pre class='green'>func SomeFunction(logger <span style="color: #0000ff;">interface</span>{Log(<span style="color: #0000ff;">string</span><span style="color: #000000;">)}){

    logger.Log(&ldquo;hello world, I am go lang&rdquo;).

}</span></pre>
</div>


<p>&nbsp;</p>

<p>实现提供者：</p>

<div class="cnblogs_code">
<pre class='green'>type S <span style="color: #0000ff;">struct</span><span style="color: #000000;"> { }

func (</span><span style="color: #0000ff;">this</span> *S)Log(msg <span style="color: #0000ff;">string</span><span style="color: #000000;">) {

    console.log(msg)

}</span></pre>
</div>


<p>&nbsp;</p>

<p>在类型S就是一个实现了Logger的实例。</p>

<p>&nbsp;</p>

<p>Go还有一种叫做空接口，能够容纳万物的东西;</p>

<div class="cnblogs_code">
<pre class='green'>func log(any <span style="color: #0000ff;">interface</span>{}) <span style="color: #0000ff;">int</span><span style="color: #000000;"> {

    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> any.(I).Get()

 }</span></pre>
</div>


<p>&nbsp; &nbsp;Go语言不同于其他鸭子类型语言的是它实现了在编译时期检查，同时也不失这种自由度。</p>

<p>&nbsp;&nbsp;&nbsp; 另外TypeScript想必你也知道 ，这与google的dart一样致力于将javascript带入大规模开发的语言，不同的是TypeScript是javascript的超集，并不是重造一门新语言。他为javascript引入的接口，类型，泛型等较完备的类型系统，是的能够有更好的IDE支持，从某种程度上来说，这是对鸭子类型或者javascript编译器的检查推迟的弥补。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2013/06/30/3163358.html" title="原文首发">原文首发请看这里</a></p>
=======
  <div class="entry-content"><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 最近遇到html模板解析，我完全可以用MS的T4模板或者是StringTemplate等其他的模板来做，但是出于尝试和对Razor语发的感兴趣，便翻了翻Razor模板的资料，其CodePlex主页<a href="http://razorengine.codeplex.com/" title="http://razorengine.codeplex.com/">http://razorengine.codeplex.com/</a>。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 下面讲的都是一些其主页上面的例子，所以请大家别拍砖。别后面想到有些实际意义的例子在写个具体的运用例子吧。</p>

<pre><code>     public static class Razor 
    { 
        public static string Parse(string template, string name = null); 
        public static string Parse&lt;T&gt;(string template, T model, string name = null); 
        public static void SetLanguageProvider(ILanguageProvider provider); 
        public static void SetMarkupParser(MarkupParser parser); 
        public static void SetTemplateBaseType(Type type); 
    }
</code></pre>

<p>在Razor这个静态类中最重要的方法当然是我们的Parse方法了，其有两个重载，在第二个重载在我们可以传入Template的Model，了解asp.net mvc都会知道这个Model。同时我们可以用SetLanguageProvider方法传入LanguageProvider（C#、VB）等，SetTemplateBaseType传入模板BaseType（可能是我们的自定义类型）。</p>

<p>1：先来个简单的Template：</p>

<pre><code>static void Main(string[] args) 
           { 
               string template = "Hello @Model.Name! Welcome to Razor!"; 
               string result = Razor.Parse(template, new { Name = "World" });         
               Console.WriteLine(result); 
               Console.Read(); 
           }
</code></pre>

<p>输出结果：</p>

<p>Hello World! Welcome to Razor!</p>

<p>在这里我们传入的是new { Name = &ldquo;World&rdquo; }的匿名对象的Model。</p>

<p>2：内部嵌套方法：</p>

<pre><code>string template = @"@helper MyMethod(string name) {

    Hello @name

}

@MyMethod(Model.Name)! Welcome to Razor!"; 

string result = Razor.Parse(template, new { Name = "World" });
</code></pre>

<p> 输出同样是上边的结果，但是注意这里的与上面不同的是在{}中间的空格等是不会忽略的。我的理解是同样是一个模板的形式吧。</p>

<p>3：传递模板参数：</p>

<p>在传递参数的情况下我们可以采用自定义类，继承至TemplateBase 或者TemplateBase&lt;T&gt;，后者是带Model的情形。</p>

<p>还是官方的例子来看看，</p>

<pre><code>static void Main(string[] args) 
    { 
        Razor.SetTemplateBaseType(typeof(MyCustomTemplateBase&lt;&gt;));

        string template = "My name in UPPER CASE is: @ToUpperCase(Model.Name)"; 
        string result = Razor.Parse(template, new { Name = "Matt" });

        Console.WriteLine(result); 
        Console.Read(); 
    } 
} 
public abstract class MyCustomTemplateBase&lt;T&gt; : TemplateBase&lt;T&gt; 
{ 
    public string ToUpperCase(string name) 
    { 
        return name.ToUpper(); 
    } 
}
</code></pre>

<p>输出结果为：My name in UPPER CASE is: MATT。</p>

<p>在我们的MyCustomTemplateBase&lt;T&gt;抽象类中我们可以像MVC一样定义一些辅助属性和方法，像html、Request、Response等辅助类等</p>

<p>有事我们需要自定义一些非modle的非static property给Template，我的考虑是在TemplateService 中的重写Parse方法中初始化Action：
public string Parse&lt;T&gt;(string template, T model, string name = null，Action&lt;ITemplate&lt;dynamic&gt;&gt; initAction);</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2010/12/22/1913718.html" title="原文首发">原文首发请看这里</a></p>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
<<<<<<< HEAD
      <h1 class="entry-title"><a href="/blog/2013/05/29/yin-cang-zai-mock-zhi-hou-di-kuai-gan/">隐藏在mock之后的‘快感’</a></h1>
=======
      <h1 class="entry-title"><a href="/blog/2010/12/15/FCK-qu-diao-p-biao-qian-he-jia-Body-biao-qian/">FCK去掉p标签 和加Body标签</a></h1>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
    
    
      <p class="meta">
        








  


<<<<<<< HEAD
<time datetime="2013-05-29T00:00:00+08:00" pubdate data-updated="true"></time>
=======
<time datetime="2010-12-15T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2010/12/15/FCK-qu-diao-p-biao-qian-he-jia-Body-biao-qian/#disqus_thread"
             data-disqus-identifier="http://greengerong.github.io/blog/2010/12/15/FCK-qu-diao-p-biao-qian-he-jia-Body-biao-qian/">Comments</a>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
        
      </p>
    
  </header>


<<<<<<< HEAD
  <div class="entry-content"><p>&nbsp;&nbsp; &nbsp; &nbsp;最近某同事抱怨他们的测试难写，经常花费在测试的时间比产品代码更多，而且每次重构后都必须修改一大堆的测试。和同事闲谈后得知，在其项目中大量的使用了mock，或者说对mock的使用过度极端对所谓的单元测试&ldquo;快速&rdquo;，&ldquo;独立&ldquo;的过度。 在前边转载过《软件开发中没有所谓正确的方法》，当你把某一种方法论作为银弹使用的时候，早晚魔鬼会伴随在你身边。</p>

<p>&nbsp; &nbsp; &nbsp;Mock给我带来了感知，剥离了类与类之间的依赖，有助于我们更好的工作在当前的关注点 .但同时由于太多的对场景的假设，导致这块代码成为了信息的孤岛，甚至很多时候不得不用mock的第二特性verify，order，以至于你的测试关心的不再是代码存在的business逻辑，而倾向代码层面的设计实现，这就把你单元测试推向了&ldquo;白盒测试&ldquo;的位置，导致测试变为脆弱的测试。每当简单的重构导致内部的变化，你的测试也必须随着改变。</p>

<p>&nbsp; &nbsp; &nbsp;鄙人认为作为一个好的测试而言，在一次合法的简单重构之下，是不需要修改测试的，因为你修改的只是内部实现，而不是business的改变，如果你边改测试边重构或者重构后挂到一大堆测试，这意味这你的测试不是一个稳定的测试或者你不是一次合法的重构（也许redesign，override）。</p>

<p>&nbsp; &nbsp; &nbsp;在同事的项目中对mock的极端到了对简单的View Object 也采用builder模式，可是内部却全是mock given。在我看来而言View Object只是一个简单的数据载体，不存在行为逻辑，我们毫无必要去做mock，mock该是针对假设，而应该尽量避免对状态mock。在同事的项目中导致需要写一个测试之前，作为测试的准备given ，必须理解存在代码的实现，因为你需要一堆given，比如对于person对象，如果你在实现中需要得到account则：</p>

<p>given(person.getAccount()).willReturn(some account);</p>

<p>&nbsp; &nbsp; &nbsp;导致我需要了解实现需要什么property，如果我需要新的的property也许只是简单的把某个&ldquo;依恋情结&rdquo;放入了object，测试也需要被修改，导致重构者对自己的重构并不那么自信，这将影响重构成为日常行为，随着堆积的&rdquo;坏味道&ldquo;这将一点一点的侵蚀你的代码，项目慢慢的也许会不能的不可控。</p>

<p>&nbsp; &nbsp; &nbsp;Mock并不是一个坏的东西，结果的好坏在于使用的人，团队 的意识，如果是mock anywhere或者杜绝mock走向两个任意的极端都将是一个错误的抉择。</p>

<p>&nbsp; &nbsp; &nbsp;Mock更多的使用场景为对外界资源解依赖增强感知能力，以及对无响应的重要business的验证，后者长体现于一个没有返回子void的method，但是method比如增加用户积分，记录用户信息等的。然而对于有响应的business，我需要的不是mock而应该是assert，对于测试来说对于business来说应试是我的输入应该得到我预期的响应，而非我verify某个行为发生了，那么其结果一定就正确，当然对于实现来说这是成立的，但是从测试的价值来说这厮无意义的，这将是一个脆弱的测试，我认为一个好的测试将是&ldquo;黑盒测试&ldquo;，是一个business的描述，对一份约定，契约的阐述。</p>

<p>&nbsp; &nbsp; &nbsp; 附言，如果你因为测试的速度，独立性来为自己的mock证明，那将是无意义的，不是每一个测试都必须在黄金法则内（0.1s），如果你对外部依赖，耗时依赖的分离，这我相信将不再是问题所在，测试的优化将是另一个有趣的话题，将不是本文内容之列。</p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2013/05/29/3107019.html" title="原文首发">原文首发请看这里</a></p>
=======
  <div class="entry-content"><p>如果您需要编辑模板页，默认的FCK设置是会去掉&lt;HTML&gt;&lt;/HTML&gt;&lt;BODY&gt;</p>

<p>&lt;/BODY&gt;标签，而且会给你加上&lt;P&gt;&lt;/P&gt;标签的，怎么办呢，只要设置一个小的</p>

<p>地方就可以了。在fckconfig里面有 FCKConfig.FullPage = false ;
改为 FCKConfig.FullPage = true
如果想去掉自动添加&lt;P&gt;的代码就可以在这里设置
默认是</p>

<pre><code>FCKConfig.EnterMode = 'p' ;   // p | div | br
FCKConfig.ShiftEnterMode = 'br' ; // p | div | br
</code></pre>

<p>改成</p>

<pre><code>FCKConfig.EnterMode = '' ;   // p | div | br
FCKConfig.ShiftEnterMode = 'br' ; // p | div | br   
</code></pre>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2010/12/15/1906959.html" title="原文首发">原文首发请看这里</a></p>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
<<<<<<< HEAD
      <h1 class="entry-title"><a href="/blog/2013/05/26/ji-cheng-fu-wu-jian-kong-qi-green-monitor-fa-bu/">集成服务监控器-green.monitor发布</a></h1>
=======
      <h1 class="entry-title"><a href="/blog/2010/12/13/wo-di-cheng-xu-ren-sheng-yu-yan-xue-xi-zhi-lu/">我的程序人生&#8211;语言学习之路</a></h1>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
    
    
      <p class="meta">
        








  


<<<<<<< HEAD
<time datetime="2013-05-26T00:00:00+08:00" pubdate data-updated="true"></time>
=======
<time datetime="2010-12-13T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2010/12/13/wo-di-cheng-xu-ren-sheng-yu-yan-xue-xi-zhi-lu/#disqus_thread"
             data-disqus-identifier="http://greengerong.github.io/blog/2010/12/13/wo-di-cheng-xu-ren-sheng-yu-yan-xue-xi-zhi-lu/">Comments</a>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
        
      </p>
    
  </header>


<<<<<<< HEAD
  <div class="entry-content"><p>&nbsp; &nbsp; &nbsp; 在大型企业应用开发中，一个项目经常需要依赖于多个项目集成，经常某个集成服务的升级或者不工作，会导致你所工作的服务也挂掉，甚至影响你的开发流程。你是否还在接到测试团队或者运维团队的某个Bug，而自己花费了大量时间终于查出来是某个集成服务升级或异常，在这里浪费了大量时间，在笔者为所在项目建立了一个第三方集成服务监控的Monitor，去实时监控项目所依赖的所有集成服务，数据库。现在开源在github <a href="https://github.com/greengerong/green-monitor">https://github.com/greengerong/green-monitor</a>，在其sample目录下有个使用demo。</p>

<h2><em>maven&nbsp;</em>dependency</h2>

<div class="cnblogs_code">
<pre class='green'><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">dependency</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">groupId</span><span style="color: #0000ff;">&gt;</span>com.github.greengerong<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">groupId</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">artifactId</span><span style="color: #0000ff;">&gt;</span>green.monitor<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">artifactId</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">version</span><span style="color: #0000ff;">&gt;</span>1.2<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">version</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">dependency</span><span style="color: #0000ff;">&gt;</span></pre>
</div>


<p>&nbsp;</p>

<h2>demo效果如下：</h2>

<p><img src="http://images.cnitblog.com/blog/63184/201305/26183719-93e330e6d3b04c219f0ea423b973a356.png" alt="" /></p>

<h1>建立自己的monitor：</h1>

<p>1：首先在你spring mvc web project 的 pom文件中引 入green-monitor的dependency。(spring 3.0以上)
2：在spring mvc的 ioc context config中启用annotation dirver，如下xml：</p>

<div class="cnblogs_code">
<pre class='green'><span style="color: #0000ff;">&lt;?</span><span style="color: #ff00ff;">xml version="1.0" encoding="UTF-8"</span><span style="color: #0000ff;">?&gt;</span>
  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">beans </span><span style="color: #ff0000;">xmlns</span><span style="color: #0000ff;">="http://www.springframework.org/schema/beans"</span><span style="color: #ff0000;">
         xmlns:xsi</span><span style="color: #0000ff;">="http://www.w3.org/2001/XMLSchema-instance"</span><span style="color: #ff0000;">
         xmlns:p</span><span style="color: #0000ff;">="http://www.springframework.org/schema/p"</span><span style="color: #ff0000;">
         xmlns:mvc</span><span style="color: #0000ff;">="http://www.springframework.org/schema/mvc"</span><span style="color: #ff0000;">
         xmlns:context</span><span style="color: #0000ff;">="http://www.springframework.org/schema/context"</span><span style="color: #ff0000;">
         xmlns:util</span><span style="color: #0000ff;">="http://www.springframework.org/schema/util"</span><span style="color: #ff0000;">
         xsi:schemaLocation</span><span style="color: #0000ff;">="http://www.springframework.org/schema/beans
               http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
               http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
               http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
               http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd"</span><span style="color: #0000ff;">&gt;</span>

      <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">mvc:annotation-driven</span><span style="color: #0000ff;">/&gt;</span>

      <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">context:component-scan </span><span style="color: #ff0000;">base-package</span><span style="color: #0000ff;">="green.monitor"</span><span style="color: #0000ff;">/&gt;</span>

      <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"</span><span style="color: #0000ff;">/&gt;</span>

      <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="viewResolver"</span><span style="color: #ff0000;"> class</span><span style="color: #0000ff;">="org.springframework.web.servlet.view.InternalResourceViewResolver"</span><span style="color: #0000ff;">&gt;</span>
          <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="prefix"</span><span style="color: #0000ff;">&gt;</span>
              <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">value</span><span style="color: #0000ff;">&gt;</span>/WEB-INF/pages/<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">value</span><span style="color: #0000ff;">&gt;</span>
          <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">property</span><span style="color: #0000ff;">&gt;</span>
          <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="suffix"</span><span style="color: #0000ff;">&gt;</span>
              <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">value</span><span style="color: #0000ff;">&gt;</span>.jsp<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">value</span><span style="color: #0000ff;">&gt;</span>
          <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">property</span><span style="color: #0000ff;">&gt;</span>
      <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">bean</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">beans</span><span style="color: #0000ff;">&gt;</span></pre>
</div>


<p>&nbsp;</p>

<p>3:在项目resources(mian/resources)下建立monitor-config.xml。如果需要 在不同环境配置不同信息，可以在运行机器上加入key为appenv的环境变量，程序会根据不同agent加载monitor-config.[appenv].xml配置文件.或者利用mavn，gradle这类构建工具按环境输出配置信息。</p>

<p>配置文件形如：</p>

<div class="cnblogs_code">
<pre class='green'><span style="color: #0000ff;">&lt;?</span><span style="color: #ff00ff;">xml version="1.0" encoding="UTF-8"</span><span style="color: #0000ff;">?&gt;</span>
      <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">monitoring </span><span style="color: #ff0000;">version</span><span style="color: #0000ff;">="1.0"</span><span style="color: #ff0000;"> name</span><span style="color: #0000ff;">="monitor-sample"</span><span style="color: #0000ff;">&gt;</span>
          <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">monitors</span><span style="color: #0000ff;">&gt;</span>
              <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">monitor </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="mock-monitor"</span><span style="color: #0000ff;">&gt;</span>green.monitor.demo.MockMonitorRunner<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">monitor</span><span style="color: #0000ff;">&gt;</span>
          <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">monitors</span><span style="color: #0000ff;">&gt;</span>
          <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">items</span><span style="color: #0000ff;">&gt;</span>
              <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">item </span><span style="color: #ff0000;">monitor</span><span style="color: #0000ff;">="http-connection"</span><span style="color: #ff0000;"> name</span><span style="color: #0000ff;">="hello service"</span><span style="color: #0000ff;">&gt;</span>
                  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">params</span><span style="color: #0000ff;">&gt;</span>
                      <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">param </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="url"</span><span style="color: #0000ff;">&gt;</span>http://localhost:8080/demo/hello<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">param</span><span style="color: #0000ff;">&gt;</span>
                      <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">param </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="method"</span><span style="color: #0000ff;">&gt;</span>GET<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">param</span><span style="color: #0000ff;">&gt;</span>
                      <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">param </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="response-code"</span><span style="color: #0000ff;">&gt;</span>200<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">param</span><span style="color: #0000ff;">&gt;</span>
                      <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">param </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="param"</span><span style="color: #0000ff;">&gt;</span>name=success<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">param</span><span style="color: #0000ff;">&gt;</span>
                  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">params</span><span style="color: #0000ff;">&gt;</span>
                  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">description</span><span style="color: #0000ff;">&gt;</span>This is a monitor for hello service.should be success.<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">description</span><span style="color: #0000ff;">&gt;</span>
              <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">item</span><span style="color: #0000ff;">&gt;</span>
              <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">item </span><span style="color: #ff0000;">monitor</span><span style="color: #0000ff;">="http-connection"</span><span style="color: #ff0000;"> name</span><span style="color: #0000ff;">="error service 2"</span><span style="color: #0000ff;">&gt;</span>
                  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">params</span><span style="color: #0000ff;">&gt;</span>
                      <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">param </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="url"</span><span style="color: #0000ff;">&gt;</span>http://localhost:8080/demo/failed<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">param</span><span style="color: #0000ff;">&gt;</span>
                      <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">param </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="method"</span><span style="color: #0000ff;">&gt;</span>GET<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">param</span><span style="color: #0000ff;">&gt;</span>
                      <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">param </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="response-code"</span><span style="color: #0000ff;">&gt;</span>200<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">param</span><span style="color: #0000ff;">&gt;</span>
                      <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">param </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="param"</span><span style="color: #0000ff;">&gt;</span>name=must be failed<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">param</span><span style="color: #0000ff;">&gt;</span>
                  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">params</span><span style="color: #0000ff;">&gt;</span>
                  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">description</span><span style="color: #0000ff;">&gt;</span>This is a monitor for error service.should be failed.<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">description</span><span style="color: #0000ff;">&gt;</span>
              <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">item</span><span style="color: #0000ff;">&gt;</span>
              <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">item </span><span style="color: #ff0000;">monitor</span><span style="color: #0000ff;">="mock-monitor"</span><span style="color: #ff0000;"> name</span><span style="color: #0000ff;">="Random failed Service"</span><span style="color: #0000ff;">&gt;</span>
                  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">description</span><span style="color: #0000ff;">&gt;</span>This monitor will be random failed!<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">description</span><span style="color: #0000ff;">&gt;</span>
              <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">item</span><span style="color: #0000ff;">&gt;</span>
          <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">items</span><span style="color: #0000ff;">&gt;</span>
      <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">monitoring</span><span style="color: #0000ff;">&gt;</span></pre>
</div>


<p>&nbsp;</p>

<p>这样你就可以运行monitor了，url为host + &ldquo;/monitor&rdquo;</p>

<h1>扩展</h1>

<p>1：扩展runner 同时monitor为你提供了自我特定需求扩展的机会，在xml config中你应该主意到了有个monitor的配置节，这里就可以配置你自定义runner（其实现MonitorRunner接口),配置节name则作为后边item的引用name。</p>

<p>系统默认加入了web-service,dababase,http-connection3个常用runner。具体使用请看demo。
2：系统提供了service为基于spring restfull api,所以你可以在其他地方展示该monitor状况。(在下一个版本将提供jsonp的跨域处理)。</p>

<p>&nbsp; &nbsp;monitor project repo:&nbsp;<a href="https://github.com/greengerong/green-monitor">https://github.com/greengerong/green-monitor</a></p>

<p>&nbsp;</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2013/05/26/3100241.html" title="原文首发">原文首发请看这里</a></p>
=======
  <div class="entry-content"><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在这里总结一下我在语言学习之路。我是一个信息与计算科学的学习，属于应用数学，走上了程序员之路，回想起觉得有些诧异。我并不是科班出生的合格程序员。我走上这条道理也是一种偶然，或许该说是兴趣所致吧。在大学之前，我一个僻远山区的孩子，计算机这个东西碰都没有碰过得，记得高中会考时候连复制、新建这些简单操作都不知道的我，大学在第一个语言课C学习中感到了乐趣所在，在编写出每一个code，都能让我有一种自豪感。慢慢的我爱上的Code，又等到了两个老师的帮助，进入了某大企业实习。大二开始就在外边做项目，给我了许多程序基础理论和设计思想等方面的积累。使我的程序之路走的比较顺利，毕业时，虽然某些企业对我的经验有所怀疑。</p>

<p>&nbsp;&nbsp;&nbsp; 在大学语言的学习之路我学了好几门语言，在这里和大家一一分享下我的这条学习之路。</p>

<p>&nbsp;&nbsp;&nbsp; 按时间来说我接触的首先是c这门古老的语言，也是他带着我走上了这条程序之路。在刚学完C的时候我一个非科班的师弟（当时大一下期）在校程序大赛中拿的大奖，树立的我软件的梦想，虽然在毕业后有些徘徊，但是在学生期间对我的程序学习之路是很大的鼓励，当时我还学习的C的一些高级编程Socket等（现在已忘的差不多了），还参加了学校的单片机创新课题用C Show了一下，哈哈。下面是我当时的最后综合实验程序-多种排序集合：</p>

<pre><code> #include&lt;stdio.h&gt; 
        #define M  20

        void disp1(int *a,int n) 
        {    int i; 
        printf("\nsort before  :*****\n"); 
          for(i=1;i&lt;=n;i++) 
            printf(" %3d",a[i]); 
        }

        void disp2(int *a,int n) 
        { int i; 
          printf("\nsort after  :*****\n"); 
        for(i=1;i&lt;=n;i++) 
             printf(" %3d",a[i]); 
              a[0]=-1; 
        }

        void create(int *a,int *b,int  *n) 
        {int i; 
          printf("input the toall\n"); 
             scanf("%d",n); 
            for(i=1;i&lt;=*n;i++) 
            {  printf("input the %d\n",i); 
                scanf("%d",&amp;a[i]); 
                 b[i]=a[i]; 
              } 
           a[0]=b[0]=0; 
        }

        void  insertsort(int *a,int n) 
        { int i,j;

          for(i=2;i&lt;=n;i++) 
           {  a[0]=a[i]; 
             for(j=i-1;a[0]&lt;a[j];j--) 
                        a[j+1]=a[j]; 
                  a[j+1] =a[0]; 
            }

        }


        void xiersort(int *a,int n) 
        { int d[3]={5,3,1}; 
           int i,j,k=0;

           while(k&lt;3) 
        {  for(i=d[k]+1;i&lt;=n;i++) 
             {   a[0]=a[i]; 
                 for(j=i-d[k];j&gt;0&amp;&amp;a[j]&gt;a[0];j=j-d[k]) 
                        a[j+d[k]]=a[j]; 
                  a[j+d[k]]=a[0]; 
              } 
            k++; 
        }

        }


        void maopaosort(int *a,int n) 
        {  int i,j,change,t;

          for(i=1;i&lt;n;i++) 
           { change=0; 
               for(j=1;j&lt;=n-i;j++) 
                  if(a[j]&gt;a[j+1]) 
                      { t=a[j]; 
                         a[j]=a[j+1]; 
                          a[j+1]=t; 
                           change=1; 
                       }

               if(change==0) 
                           break; 
              } 
        }


        void quicksort(int *a,int t, int n) 
        {  int i=t,j=n;

          while(i&lt;j) 
        {   if(i&lt;j) 
            {   a[0]=a[i]; 
                 while(i&lt;j&amp;&amp;a[j]&gt;a[0]) 
                             j--; 
                 if(i&lt;j) 
                   {  a[i]=a[j]; 
                         i++; 
                     }

               while(i&lt;j&amp;&amp;a[i]&lt;a[0]) 
                             i++; 
                 if(i&lt;j) 
                   {  a[j]=a[i]; 
                         j--; 
                     } 
            } 
               a[i]=a[0]; 
             quicksort(a,1,i-1); 
             quicksort(a,i+1,n);

        } 
        }


        void jiandansort(int *a,int n) 
        { int i,j,t; 
          for(i=1;i&lt;n;i++) 
          { for(j=i+1;j&lt;=n;j++) 
               if(a[i]&gt;a[j]) 
               {  t=a[i]; 
                    a[i]=a[j]; 
                   a[j]=t; 
                } 
           } 
        }



        void main( ) 
        {int a[M+1],b[M+1],n=0,i; 
        char ch1='y',ch2; 
        create(a,b,&amp;n);

        while(ch1=='y'||ch1=='Y') 
        { printf("\n input 1---------  insert sort"); 
           printf("\n input 2---------  xi er sort"); 
           printf("\n input 3---------mao pao sort"); 
           printf("\n input 4---------  quick sort"); 
            printf("\n input 5--------  jian dan sort"); 
            printf("\n inputc(C)---------  creat"); 
            printf("\n input n(N)---------  exit\n");

            scanf("\n%c",&amp;ch2); 
             if(a[0]==-1) 
               for(i=1;i&lt;=n;i++) 
                 a[i]=b[i];

        switch(ch2) 
        { case  '1': disp1(a,n);     insertsort(a,n) ; 
                           disp2(a,n);      break; 
           case  '2': disp1(a,n);     xiersort(a,n); 
                            disp2(a,n);    break; 
           case  '3': disp2(a,n);     maopaosort(a,n); 
                           disp2(a,n);       break; 
           case  '4': disp1(a,n);    quicksort(a,1,n); 
                          disp2(a,n);      break; 
            case  '5':disp1(a,n);       jiandansort(a,n); 
                            disp2(a,n);     break; 
            case  'c': 
            case  'C':create(a,b,&amp;n);   break; 
            case  'n': 
            case  'N' :ch1='n'; 
        } 
        } 
        }
</code></pre>

<p> 现在看起代码是比较糟糕!</p>

<p>&nbsp; 接着我学习的汇编这门更古老的语言的，个人感觉汇编若只是说语法和学习，并不难。在这里也贴出我学习时候的一个打字游戏的小Code.</p>

<pre><code>    ;;;;任意掉落字符,按空格和ESC暂停并再ESC结束,空格继续;; 
    .model small 
    clear_screen macro op1,op2,op3,op4 ;清屏宏定义   
    push ax 
    push bx 
    push cx 
    push dx 
        mov ah,06h          
        mov al,00h 
        mov bh,06h 
        mov ch,op1 
        mov cl,op2 
        mov dh,op3 
        mov dl,op4 
        int 10h 
        mov ah,02h 
        mov bh,0h 
        mov dh,00h 
        mov dl,00h 
        int 10h 
    pop dx 
    pop cx 
    pop bx 
    pop ax 
    endm

    set  macro p1,p2,p3 ;;;设置光标并显示p1 
    push cx 
    mov ah,02h 
    mov bh,0h

    mov dx,p3 
    mov dh,p2 
    int 10h 
    mov ah,0ah 
    mov al,p1 
    mov cx,1 
    mov bl,12 
    int 10h 
    pop cx 
    endm

    delay macro;;;拖延时间 
    local sg1,sg2,nextdelay,nextdelay1 
    push cx 
    push dx 
    push  ax 
    mov dx,speed 
    mov cx,1000 
    sg1 : 
    sg2 : 
       loop sg2 
    dec dx 
    jnz sg2 
    mov ah,0bh 
    int 21h 
    cmp al,0h;;无字符可以读取 
    je nextdelay 
    mov ah,7 
    int 21h 
    cmp al,' ' 
    je calll 
    cmp al,1bh 
    jne nextdelay1 
    calll : 
    call justment 
      jmp  nextdelay 
    nextdelay1: 
    cmp al,letters[si] 
      jne  nextdelay 
      call disp 
    nextdelay: 
    pop ax 
    pop dx 
    pop  cx 
    endm

    menu  macro op1,op2,op3 ;菜单显示宏定义      
       mov ah,02h 
       mov bh,00h 
       mov dh,op1 
       mov dl,op2 
       int 10h 
       mov ah,09h 
       lea dx,op3 
       int 21h 
    endm


    .model 
    .stack 256 
    .data 
    letters db "jwmilzoeucgpravskntxhdyqfb" 
            db 'iytpkwnxlsvxrmofzhgaebudjq' 
            db 'nwimzoexrphysfqtvdcgljukdas' 
    count equ $-letters ;;79 
    menu0 db "Welcome to play !$"   
    menu1 db 'input enter to game!',0dh,0ah,'$' 
    menu2 db 'input space to halt!',0dh,0ah,'$' 
    menu3 db 'input esc to exit!',0dh,0ah,'$' 
    menu40 db 'this is agame which pritise keyin,',0dh,0ah,'$' 
    menu41    db ' when you are exit from the ' 
                     db 'game ,you will',0dh,0ah,'$' 
    menu42 db ' kown how much you can hit ',0dh,0ah,'$' 
    msg db 'choise speed:f--fast;s--slow;other character--orditional ! ' 
    msg0 db 'you hit:$' 
    msg1 db 'Help : space--- halt   Esc---home$' 
    speed dw  800 
    h dw ? 
    l  db ? 
    gs db 0 
    .code 
    mov ax,@data 
    mov ds,ax 
    menulist : 
    clear_screen 0d,00d,25d,79d  ;;24*80(0开始) 
    menu 07,20,menu0       ;菜单信息的宏调用 
             menu 09,20,menu1 
             menu 11,20,menu2 
             menu 13,20,menu3 
             menu 15,20,menu40 
             menu 17,22,menu41 
             menu 19,22,menu42 
    again: 
    mov ah,0 
    int 16h 
    cmp al,1bh 
      jne nextmain1 
    jmp overmain 
    nextmain1 : 
    cmp al,0dh 
    jne  again 
    clear_screen 0d,00d,25d,79d  ;;24*80(0开始) 
    call setspeed 
    clear_screen 0d,00d,25d,79d  ;;24*80(0开始) 
    menu 0,5,msg1;;help menu 
    mov dx,0 
    ag0: 
    call outdb 
    call rand 
    mov di,si 
    call rand 
      add di,si 
    shr di,1;;;列坐标 
    mov cx,1 
    call rand 
    push ax 
    mov ax,si 
      call rand 
      add si,ax 
      shr si,1;;;产生字符去两次的平均值 
    pop ax 
    ag : 
    mov h,di 
    mov l,cl 
    mov al,letters[si] 
    set al,cl,di 
      delay 
    dispag : 
    set ' ',cl,di 
      inc cx 
    cmp cx,23 
    je next 
    jmp ag 
    next : 
    inc dx 
    cmp dx,5 
    je  overmain 
    jmp ag0 
    overmain:


    call outdb 
    mov ah,4ch 
    int 21h

    ;;;;;; 
    rand proc 
    push ax 
    push bx 
    push cx 
    push dx 

    sti;允许中断1ah:0 
    mov ah,0 
    int 1ah 
    mov ax,dx 
    and  ah,0;;清除高6位 
    mov bl,count 
    div  bl 
    mov al,ah 
    mov ah,0 
    mov si,ax 
    pop dx 
    pop  cx 
    pop bx 
    pop ax 
    ret 
    rand endp 
    ;;;;;;;; 
    justment proc

    cmp al,' ' 
    call stop;;暂停

    ret 
    justment endp 
    ;;;;;;;;;;;;;;; 
    stop proc 
    ;;;;;;;;;;;;;;local agstop 
    agstop : 
    mov ah,0bh 
    int 21h 
    cmp al,0 
    je  agstop 
    mov ah,7 
    int 21h 
    cmp al,' ' 
    je overstop 
    cmp al,1bh 
    jne nextagstop1 
    jmp menulist 
    nextagstop1: 
    jmp agstop 
    overstop: 
    ret 
    stop endp

    ;;;; 
    disp proc 
    set ' ',l,h 
    inc gs 
    call ring

    call outdb 
    jmp ag0 
    ret 
    disp endp 
    ;;;;;;;;;; 
    outdb proc 
    push ax 
    push bx 
      push cx 
    push dx

    mov ah,02h 
       mov bh,0h 
       mov dh,0 
       mov dl,60 
       int 10h

    mov ah,9 
    mov dx,offset msg0 
    int 21h 
    mov al,gs

      mov ch,10 
    mov cl,0;记数 
    mov bh,0;;bh=0 
    agodb : 
      mov ah,0 
      div ch 
      mov bl,ah;;存余数入栈 
       add bl,'0' 
    push bx 
       inc cl 
       cmp al,0 
        jg agodb 
      mov ch,0

    agodb1 : 
    pop bx 
    mov dx,bx 
    mov ah,2 
    int 21h 
    loop agodb1

    ;;mov dl,0dh 
    ;; mov ah,2 
    ;;int 21h 
    ;; mov dl,0ah 
    ;; mov ah,2 
    ;;int 21h

    pop dx 
    pop cx 
    pop bx 
    pop ax 
    ret 
    outdb endp 
    ;;;;;;;;;;;;;; 
    setspeed proc 
    push ax 
    menu 15,5,msg 
    mov  ah,1h 
    int 21h 
    cmp al,'f' 
    je nextspeed1 
    cmp al,'s' 
      jne nextspeed2 
    mov speed,1000 
    jmp  nextspeed2 
    nextspeed1 : 
    mov speed,500 
    nextspeed2: 
    pop ax 
      ret 
    setspeed endp

    ;;;;;;;;;;;;; 
    ring proc 
    push ax 
    push cx 
    push dx

    mov cx,3 
    ringed : 
    mov ah,02h 
    mov dl,07h 
    int 21h 
    clear_screen 1d,00d,25d,79d  ;;24*80(0开始) 
    loop ringed 
    pop dx 
    pop cx 
    pop ax 
    ret 
    ring endp

    end
</code></pre>

<p>&nbsp;&nbsp;&nbsp;&nbsp; 紧接着遇见的上面说的两位老师他们用的是c#语言，和他们一起做些小开发，所以我也走上了,NET之路，刚开始做了几个Web的开发。其中一个老师是某企业的架构师，所以在他的帮助和介绍下，我和他一同学习并进入企业实习，做了一些Winform的开发，平时空闲的时候就在老师的指导下位他的快速开发平台，添加一些新东西，改进等工作。那时虽然辛苦一些，但是过的挺充实的，读书的时候还有比较好的外快，挺兴奋的。同时，我也没有拉下一门课程学习，虽然经常不去上课，老师们都挺支持和理解我的，期末时考试也考得很好。在这里我感谢每一位关心和支持我的老师们，你们辛苦了。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp; 在.NET平台上C#肯定和必备的，在这里也挑不出来典型的code展示，同时在,NET平台的唯一函数式编程语言出来后，我带着多函数式思想的理解的心情，学习了这门语言，第一次感觉到函数式编程的魅力所在，并不是写一些code（博客里贴出了两篇<a href="http://www.cnblogs.com/whitewolf/archive/2010/11/29/1891322.html"><font color="#6699cc">F#初试（2）</font></a> 、<a href="http://www.cnblogs.com/whitewolf/archive/2010/07/14/1777408.html"><font color="#6699cc">F#初试&mdash;打印目录文件树</font></a>）。&nbsp;&nbsp;&nbsp;</p>

<p>&nbsp;&nbsp;&nbsp; 后来我也学习了我们的面向对象的语言C++，Java，MathLab（对于数学专业的尅定是必须的，呵呵）。在c++学习时候学的感觉挺好的，但是到了准备学习MFC，看着他的函数名称等一大堆的字母，比起C#是难，这是我的c#也学得有一定基础，所以我放弃了。对于Java我还是很指着的学习了一段时间，会Java Bean，model1的开发，但只能说是基础的，当时让我苦恼的是Java一大堆的东西需要自己手工配置，还有就是那个IDE的智能提示速度让人还郁闷.绕了一圈还是继续我的.NET之路，因为在外边我所做的都是基于c# WinForm的开发，它有一个优秀的类库和IDE支持。虽然我没有继续Java，c++的学习，但是我觉得他们也是很优秀的，并不比c#差。对于一个程序不管你是c#，Java编写的能满足客户需求就是一个好的code，程序只是各种语言抒写的艺术，不该存在语言之争。毕业之时我希望走的c的编程，但是没有这样的基于，还有就是.NET已经具有了一定基础，更好找工作些，如果有机会我觉得我还想走c的编程，前提是工资与我.NET持平，呵呵。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp; 本想写的好些，但是我的文字功底太差了，构思的时候挺多的，一到写的时候感觉痛困难的，需要多多练习。请大家多多指教。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp; 随笔收尾了，虽然现实与梦想存在差距，但是我的程序之路然在继续&#8230;</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2010/12/13/1904361.html" title="原文首发">原文首发请看这里</a></p>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
<<<<<<< HEAD
      <h1 class="entry-title"><a href="/blog/2013/05/16/CSV-he-ji-he-dui-xiang-ji-yu-Annotation-cao-zuo-feng-zhuang/">CSV和集合对象基于Annotation操作封装</a></h1>
=======
      <h1 class="entry-title"><a href="/blog/2010/11/29/F-chu-shi-2/">F#初试（2）</a></h1>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
    
    
      <p class="meta">
        








  


<<<<<<< HEAD
<time datetime="2013-05-16T00:00:00+08:00" pubdate data-updated="true"></time>
=======
<time datetime="2010-11-29T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2010/11/29/F-chu-shi-2/#disqus_thread"
             data-disqus-identifier="http://greengerong.github.io/blog/2010/11/29/F-chu-shi-2/">Comments</a>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
        
      </p>
    
  </header>


<<<<<<< HEAD
  <div class="entry-content"><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 随着项目上线，暂时处于闲置状态，所以趁闲带着团队对在这一年项目中做的比较好的组件，工具和实践总结和抽取出来，在我后续的随笔中将会陆续发布出来。今天主要是一个简单的maven小组件，对opencsv基于Annotation简单的封装，使得我们可以轻易的将CSV文件转化为List对像和把List对像导出为CSV文件。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 项目托管地址于github <a href="https://github.com/greengerong/opencsv-utils">https://github.com/greengerong/opencsv-utils</a>。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 对于代码就不用多说了，简单看看如何使用。</p>

<pre class='green'><code>package opencsv.utils;



public class Person {



private int id;



@Csv("person name")

private String name;



@Ignore

private int age;



public Person(int id, String name, int age) {

    this.id = id;

    this.name = name;

    this.age = age;

}



public Person() {



}



public int getId() {

    return id;

}



public void setId(int id) {

    this.id = id;

}



public String getName() {

    return name;

}



public void setName(String name) {

    this.name = name;

}



public int getAge() {

    return age;

}



public void setAge(int age) {

    this.age = age;

}

}
</code></pre>

<p>&nbsp;</p>

<p>Mapping会自动将没有ignore的字段作为CSV的映射属性名作为CSV列头，如果针对特殊列则可以标记@CSV解决。</p>

<p>1： 读取CSV:</p>

<p>(1) 基于Annotation映射方式</p>

<pre class='green'><code> @Test

public void shouldGetPersonFromCSV() throws Exception {

    StringReader reader = new StringReader("id,person name\n1,name1\n2,name2\n");

    List&lt;Person&gt; personList = personCsvMapper

            .withMapping("id", "id")

            .withMapping("person name", "name")

            .fromCsv(reader);



    assertThat(personList.size(), is(2));



    final Person first = personList.get(0);

    assertThat(first.getId(), is(1));

    assertThat(first.getName(), is("name1"));



    final Person second = personList.get(1);

    assertThat(second.getId(), is(2));

    assertThat(second.getName(), is("name2"));



}
</code></pre>

<p>(2) 自定义映射方式&nbsp;</p>

<pre class='green'><code>@Test

public void shouldToCsv() throws Exception {

    personCsvMapper.withMapping(new CsvColumnMapping(Person.class));

    final ArrayList&lt;Person&gt; list = new ArrayList&lt;Person&gt;();

    list.add(new Person(1, "name1", 20));

    list.add(new Person(2, "name2", 30));

    final StringWriter writer = new StringWriter();



    personCsvMapper.toCsv(writer, list);



    final String text = writer.toString();

    assertThat(text, is("id,person name\n1,name1\n2,name2\n"));

}
</code></pre>

<p>2: CSV输出</p>

<pre class='green'><code>@Test

public void shouldGetPersonFromCsv() throws Exception {

    StringReader reader = new StringReader("id,person name\n1,name1\n2,name2\n");

    List&lt;Person&gt; personList = new CsvMapper&lt;Person&gt;(Person.class)

            .withMapping(new CsvColumnMapping(Person.class))

            .fromCsv(reader);



    assertThat(personList.size(), is(2));



    final Person first = personList.get(0);

    assertThat(first.getId(), is(1));

    assertThat(first.getName(), is("name1"));



    final Person second = personList.get(1);

    assertThat(second.getId(), is(2));

    assertThat(second.getName(), is("name2"));



}
</code></pre>

<p>最后在累赘下托管地址:<a href="https://github.com/greengerong/opencsv-utils">https://github.com/greengerong/opencsv-utils</a>。其他的相比不用再说了。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2013/05/16/3082700.html" title="原文首发">原文首发请看这里</a></p>
=======
  <div class="entry-content"><p>&nbsp; 这里只是几个f#简单的算法应用，请各位别怕砖。</p>

<pre><code>    代码

    Code highlighting produced by Actipro CodeHighlighter (freeware)http://www.CodeHighlighter.com/--&gt; 1 // Learn more about F# at http://fsharp.net

    #light
    open System


    //简单的网页抓取
    open System.Text
    open System.IO
    open System.Net
    let http (url:string)=
        let request=System.Net.WebRequest.Create(url)
        let response=request.GetResponse()
        let stream=response.GetResponseStream()
        let reader=new System.IO.StreamReader(stream)
        let html =reader.ReadToEnd();
        html
    printfn "%s" (http "http://www.google.com")

    //汉罗塔问题：
    let rec HanLiTa n a b c =
        match n with
        | 1 -&gt; printfn " Move %s to %s ;"  a c
        | num -&gt;  HanLiTa (num-1) a c b ;HanLiTa 1 a b c ; HanLiTa (num-1) b a c ;

    let n=4
    printfn "HanLiTa start (%d):" n
    HanLiTa n "A" "B" "C"

    //Fibonacci基数

    let rec Fib n = 
        match n with
        |2 |1 -&gt; 1
        |i when i &gt;1 -&gt; Fib (i-1) + Fib (i-2)
        |x  when x&lt;= 0 -&gt; failwith " you should input a Interger;"

    let fibn=5    
    printfn "Fibonacci %d : %d"     fibn (Fib fibn)


    //杨辉三角
    let rec combi n r =
        let p=ref 1;
        [1 .. r] |&gt; List.iter(fun g -&gt;  p:=!p*(n-g+1)/g );
        !p

    let CombiPrint N=
        [0 .. N] |&gt;
             List.iter(fun g -&gt; ([0 .. g] |&gt;
                                        List.iter(fun h-&gt; 
                                                    if h=0 then 
                                                        [0..(N-g)] |&gt;
                                                                 List.iter(fun s-&gt;printf "  ") ; 
                                                    printf "%5d" (combi g h));
                            printf "\r\n"));

    printfn "\r\n杨辉三角:"
    CombiPrint 10


    Console.Read() |&gt;ignore
</code></pre>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2010/11/29/1891322.html" title="原文首发">原文首发请看这里</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/12/VS-shu-chu-chuang-kou-output-view-di-xiao-ji-qiao-wen-jian-hang-hao-zi-fu-ding-wei/">VS输出窗口（output View）的小技巧&#8211;文件行号字符定位</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-12T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2010/11/12/VS-shu-chu-chuang-kou-output-view-di-xiao-ji-qiao-wen-jian-hang-hao-zi-fu-ding-wei/#disqus_thread"
             data-disqus-identifier="http://greengerong.github.io/blog/2010/11/12/VS-shu-chu-chuang-kou-output-view-di-xiao-ji-qiao-wen-jian-hang-hao-zi-fu-ding-wei/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在我们的调试输出到VS输出窗口的信息，有时候我们想要鼠标点击就定位该该文件，改行，甚至该列。在强大的VS工具中已经给我们提供了这个功能，我们只需要把输出到输出窗</p>

<p>口的字符串就是一定的格式化就可以了。c#在VS输出窗口格式为：
文件名称（行号，列号）:消息信息。
比如我 test.cs（100，78）:消息信息。就是对应我们的test.cs文件的100行78个字符。
在这里我写了一个简单异常输出信息的扩展类。
代码具体如下：&nbsp;&nbsp;&nbsp;</p>

<pre><code>     代码 

    Code highlighting produced by Actipro CodeHighlighter (freeware)http://www.CodeHighlighter.com/--&gt;public class OutPutExceptionEx
        {
            public static void WriteLine(string message, Exception ex)
            {
                System.Diagnostics.StackTrace st = new System.Diagnostics.StackTrace(ex, true);
                System.Diagnostics.StackFrame frm = st.GetFrame(0);
                if (frm != null)
                {
                    System.Diagnostics.Debug.WriteLine(string.Format("{0}({1},{2}):{3})", frm.GetFileName(), frm.GetFileLineNumber(), frm.GetFileColumnNumber(), 

    message));
                }

            }

            public static void WriteLine(Exception ex)
            {
                WriteLine(ex.Message, ex);
            }

            public static void Write(string message, Exception ex)
            {
                System.Diagnostics.StackTrace st = new System.Diagnostics.StackTrace(ex, true);
                System.Diagnostics.StackFrame frm = st.GetFrame(0);
                if (frm != null)
                {
                    System.Diagnostics.Debug.Write(string.Format("{0}({1},{2}):{3})", frm.GetFileName(), frm.GetFileLineNumber(), frm.GetFileColumnNumber(), 

    message));
                }

            }

            public static void Write(Exception ex)
            {
                Write(ex.Message,ex);
            }
        }

    //测试
        class Program
        {
            static void Main(string[] args)
            {

                try
                {
                    throw new Exception("这个发生了一个错误！");
                }
                catch (Exception ex)
                {
                    OutPutExceptionEx.Write(ex);
                }

                Console.WriteLine("ok");
                Console.Read();           
            }
    }
</code></pre>

<p>图片效果：</p>

<p><img src="http://images.cnblogs.com/cnblogs_com/whitewolf/201011121051.jpg" alt="" /></p>

<p>2：</p>

<p><img src="http://images.cnblogs.com/cnblogs_com/whitewolf/2010111210512.jpg" alt="" /></p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2010/11/12/1875473.html" title="原文首发">原文首发请看这里</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/11/MEF-xue-xi-bi-ji/">MEF学习笔记</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-11T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2010/11/11/MEF-xue-xi-bi-ji/#disqus_thread"
             data-disqus-identifier="http://greengerong.github.io/blog/2010/11/11/MEF-xue-xi-bi-ji/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>&nbsp;&nbsp;&nbsp; MEF是 Managed Extensibility Framework简称，在计算机的世界什么都会加一个简称，这我们大家已经司空见惯了。从名字我们可以知道它是一个用于管理的可扩展性框架。这是和EL不同的另一种IOC方式;</p>

<p>&nbsp;&nbsp; MEF 为我们提供了一种运行时的扩展，具体应用在对象的实例化。它有目录（AssemblyCatalog）和容器（CompositionContainer）组成，他有输入输出（Exports和Imports）元数据标记，在对象实例化的时候会自动匹配这个契约。</p>

<p>下面是官方的一个展示图：</p>

<p><a href="http://images.cnblogs.com/cnblogs_com/whitewolf/Windows-Live-Writer/0291ec4c7408_12966/untitled.png"><img src="http://images.cnblogs.com/cnblogs_com/whitewolf/Windows-Live-Writer/0291ec4c7408_12966/untitled_thumb.png" title="untitled" alt="untitled" /></a></p>

<p>由CompositionContainer来管理我们的多个可组合部件。</p>

<p>下面我们来一个简单的示例来初步了解MEF:</p>

<p>控制台程序：</p>

<pre><code>     代码 

    Code highlighting produced by Actipro CodeHighlighter (freeware)http://www.CodeHighlighter.com/--&gt;using System; 
    using System.Collections.Generic; 
    using System.Linq; 
    using System.Text; 
    using System.ComponentModel.Composition;//添加引用 



    namespace MEFTest 
    { 
        public interface ILog 
        { 
            void Write(string message); 
        } 

        [System.ComponentModel.Composition.Export(typeof(ILog))] 
        public class ConsoleLog:ILog 
        { 
            public void Write(string message) 
            { 
                Console.WriteLine("Hello:"+message); 
            } 
        } 
        class Program 
        { 
            [System.ComponentModel.Composition.Import(typeof(ILog))] 
            public ILog Log; 
            static void Main(string[] args) 
            { 
                Program pro = new Program(); 
                pro.Init(); 
                pro.Log.Write("Test"); 
                Console.Read(); 
            }

            public void Init() 
            { 
                var assem = System.Reflection.Assembly.GetExecutingAssembly();//当前程序集 
                var assemcat = new System.ComponentModel.Composition.Hosting.AssemblyCatalog(assem);//构建目录 
                var container = new System.ComponentModel.Composition.Hosting.CompositionContainer(assemcat);//构建容器 
                container.ComposeParts(this);//这是一个System.ComponentModel.Composition.AttributedModelServices 的扩展方法。 
            } 
        } 
    }
</code></pre>

<p>输出为：</p>

<p>Hello:Test</p>

<p>ExportAttribute 定义如下：</p>

<pre><code>     代码 

    Code highlighting produced by Actipro CodeHighlighter (freeware)http://www.CodeHighlighter.com/--&gt;[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method | AttributeTargets.Property | AttributeTargets.Field, AllowMultiple = true, Inherited = false)] 
    public class ExportAttribute : Attribute 
    { 

        [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")] 

        [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")] 

        [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")] 
        public ExportAttribute(Type contractType); 

        public ExportAttribute(string contractName, Type contractType);


        public string ContractName { get; } 

        public Type ContractType { get; } 
    }
</code></pre>

<p>从他的定义我们可以知道他可以运用于我们的类、方法、属性、字段，并且可以多继承，但是不存在从父类的继承特性。</p>

<p>他有三种不同的标记方式方式.在MEF中这里标记为可以导出，即注入到Import。</p>

<p>ImportAttribute 定义：</p>

<pre><code>     代码 

    Code highlighting produced by Actipro CodeHighlighter (freeware)http://www.CodeHighlighter.com/--&gt;[AttributeUsage(AttributeTargets.Property | AttributeTargets.Field | AttributeTargets.Parameter, AllowMultiple = false, Inherited = false)] 
        public class ImportAttribute : Attribute, IAttributedImport 
        { 

            [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")] 
            public ImportAttribute(); 

            [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")] 
            public ImportAttribute(string contractName); 

            [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")] 
            public ImportAttribute(Type contractType); 

            public ImportAttribute(string contractName, Type contractType); 

            public bool AllowDefault { get; set; }

            public bool AllowRecomposition { get; set; } 

            public string ContractName { get; } 

            public Type ContractType { get; } 

            public CreationPolicy RequiredCreationPolicy { get; set; } 
        }
</code></pre>

<p>&nbsp;同上Export,这里标记为可被Export注入的接口点。</p>

<p>今天就写到这里了，希望大家多多指教，大家一起共同进步。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2010/11/11/MEF1.html" title="原文首发">原文首发请看这里</a></p>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
<<<<<<< HEAD
      <h1 class="entry-title"><a href="/blog/2013/05/07/xian-tan-jian-dan-she-ji-KISS-yi-huo/">闲谈简单设计(KISS)疑惑</a></h1>
=======
      <h1 class="entry-title"><a href="/blog/2010/11/10/fan-yi-31-tian-Windows-Phone-xue-xi-1-xiang-mu-mo-ban/">(翻译)31天Windows Phone学习-1-项目模板</a></h1>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
    
    
      <p class="meta">
        








  


<<<<<<< HEAD
<time datetime="2013-05-07T00:00:00+08:00" pubdate data-updated="true"></time>
=======
<time datetime="2010-11-10T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2010/11/10/fan-yi-31-tian-Windows-Phone-xue-xi-1-xiang-mu-mo-ban/#disqus_thread"
             data-disqus-identifier="http://greengerong.github.io/blog/2010/11/10/fan-yi-31-tian-Windows-Phone-xue-xi-1-xiang-mu-mo-ban/">Comments</a>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
        
      </p>
    
  </header>


<<<<<<< HEAD
  <div class="entry-content"><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 忙碌了一年了项目又到了交付了，虽然项目能成功上线（因为还有维护支持的团队）。但是个人从技术上看，这是一个不那么成功的项目，因为后期艰难的修复bug,添加feature。这与简单设计有什么关系呢？在某模块开发起初，由于架构的经验预见性的告诉我这模块开发中会出现什么问题，所以选择了提出某些比较好的解决方案，但是由于团队成员一致的所谓简单设计，通过TDD,重构达到&rdquo;合适&rdquo;的&rdquo;完美&rdquo;的设计，可是最后的结果如我所料一切的发生。这里插一句，现在在一家敏捷公司，敏捷强调是合作，所以没有一个人统一规划决策，不同之前的公司作为架构师决策一切架构设计。敏捷合作交流我不否认你正确性，因为我也相信软件是人和时间的问题，方法论都是解决我和时间的问题。但是对于一个在成长中团队，成员的设计或者某些预见性或者重构能力，力度相对不足的情形下，这样是不是合理？</p>

<p>&nbsp;&nbsp;&nbsp; 回到主题，简单设计英语 Keep It Simple, Stupid。我们常说的KISS原则，保持产品或设计的简单性，同时功能的足够性。我想说的是翻译成为简单这是一个错误的决定，因为这不是绝对的简单，在我看来最简单的系统就是没代码的系统，代码越少，甚至没有就没有bug没有维护。所以我更愿意以产品设计如家庭装修一样翻译为&rdquo;简约&rdquo;，简约而不简单。在<a href="http://book.douban.com/subject/5394309/">《简约至上-软件交互式设计四策略》</a>这本书以遥控器为例提供了删除，隐藏，转移，组织产品设计四策略，但是其简化改善后仍然五脏俱在，核心价值仍在。但是对于软件而言，我们最大对手是需求变化，所以我们常说&ldquo;拥抱变化&rdquo;，敏捷就是为了拥抱变化适应变化给用户提供更好优质可用的卓越软件。但真的所谓简单设计，我们起初就不设计？靠我们的测试驱动，行为驱动，重构等方法论就能解决软件设计？这些就是万能的灵药，软件的银弹？我还没见过这样的人，我不否认在这样牛人的存在， <a href="http://book.douban.com/search/Martin%20Fowler">Martin Fowler</a> 在<a href="http://book.douban.com/subject/1229923/">《重构改善既有代码设计》</a>一书提到XP发起一帮人能够比较好的完美利用这些方法论将代码改造为一个比较好的设计。但这毕竟是少数人的世界，我辈望山莫及，再加上项目开发周期中的由于时间，环境等等压力导致重构力度大幅度缩减，或者根本就没有把重构日常化，只是拿着重构这个感觉好nb的术语招摇撞骗（本人见过很多人或者博客将如果重构，但在鄙人鄙见下这更大程度的是重写，重新设计，只是招摇撞骗的幌子），那所谓的简单设计真的还能启用？</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在回到简单设计，在软件变化的需求下，我认为简单设计的目的是保持代码的整洁，以及不要花费太多时间在无谓的设计猜测需求中，减少类数量的庞大，其目的是减少时间人力资源的浪费，其相对于过度设计而言。但绝对不是不做设计，不留任何一点扩展，起终点在于时间资源的投入。所以我认为基于资源的投入，如果不是那么大浪费或者必须的设计，我们让然需要去做，因为程序员都是追求完美，适应以后潜在的变化。相反如果是将一个相对好的设计，或者扩展，花时间去做到所谓的简单设计，丧失扩展等，这不是减少资源投入，这是在捣蛋，花时间精力去搞破坏，即使是你认为不变，何况谁能预测未来世界。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp; 如果我们不是牛人，你却也追求卓越软件，我觉得我们还是需要考虑下设计，不要一味的&ldquo;简单设计&rdquo;，平衡各种方法论，权衡各种利弊，找到适合自己的方式方法论，如果只是&rdquo;简单设计&ldquo;却没有足够的重构力度，抑或完全的优先设计，不进行不断的持续改进，逐步细化，做到&ldquo;简约而不简单&rdquo;记住所有的技术债早晚会需要你偿还的。对于我来说没有万能的方法论，我也不是牛人，我选择设计，重构等方法论的权衡。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2013/05/07/3063984.html" title="原文首发">原文首发请看这里</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/27/xian-tan-jian-dan-she-ji-KISS-yi-huo/">闲谈简单设计(KISS)疑惑</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-27T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>&#160;&#160;&#160;&#160;&#160;&#160; 忙碌了一年了项目又到了交互了，虽然项目能成功上线（因为还有维护支持的团队）。但是个人从技术上看，这是一个不那么成功的项目，因为后期艰难的修复bug,添加feature。这与简单设计有什么关系呢？在某模块开发起初，由于架构的经验预见性的告诉我这模块开发中会出现什么问题，所以选择了提出某些比较好的解决方案，但是由于团队成员一致的所谓简单设计，通过TDD,重构达到”合适”的”完美”的设计，可是最后的结果如我所料一切的发生。这里插一句，现在在一家敏捷公司，敏捷强调是合作，所以没有一个人同意规划决策，不同之前的公司作为架构师决策一切架构设计。敏捷合作交流我不否认你正确性，因为我也相信软件是人和时间的问题，方法论都是解决我和时间的问题。但是对于一个在成长中团队，成员的设计或者某些预见性或者重构能力，力度相对不足的情形下，这样是不是合理？</p>

<p>&#160;&#160;&#160; 回到主题，简单设计英语 Keep It Simple, Stupid。我们常说的KISS原则，保持产品或设计的简单性，同时功能的足够性。我想说的是翻译成为简单这是一个错误的决定，因为这不是绝对的简单，在我看来最简单的系统就是没代码的系统，代码越少，甚至没有就没有bug没有维护。所以我更愿意以产品设计如家庭装修一样翻译为”简约”，简约而不简单。在<a href="http://book.douban.com/subject/5394309/">《简约至上-软件交互式设计四策略》</a>这本书以遥控器为例提供了删除，隐藏，转移，组织产品设计四策略，但是其简化改善后仍然五脏俱在，核心价值仍在。但是对于软件而言，我们最大对手是需求变化，所以我们常说“拥抱变化”，敏捷就是为了拥抱变化适应变化给用户提供更好优质可用的卓越软件。但真的所谓简单设计，我们起初就不设计？靠我们的测试驱动，行为驱动，重构等方法论就能解决软件设计？这些就是万能的灵药，软件的银弹？我还没见过这样的人，我不否认在这样牛人的存在， <a href="http://book.douban.com/search/Martin%20Fowler">Martin Fowler</a> 在<a href="http://book.douban.com/subject/1229923/">《重构改善既有代码设计》</a>一书提到XP发起一帮人能够比较好的完美利用这些方法论将代码改造为一个比较好的设计。但这毕竟是少数人的世界，我辈望山莫及，再加上项目开发周期中的由于时间，环境等等压力导致重构力度大幅度缩减，或者根本就没有把重构日常化，只是拿着重构这个感觉好nb的术语招摇撞骗（本人见过很多人或者博客将如果重构，但在鄙人鄙见下这更大程度的是重写，重新设计，只是招摇撞骗的幌子），那所谓的简单设计真的还能启用？</p>

<p>&#160;&#160;&#160;&#160;&#160; 在回到简单设计，在软件变化的需求下，我认为简单设计的目的是保持代码的整洁，以及不要花费太多时间在无谓的设计猜测需求中，其目的是减少时间人力资源的浪费，其相对于过度设计而言。但绝对不是不做设计，不留任何一点扩展，起终点在于时间资源的投入。所以我认为基于资源的投入，如果不是那么大浪费或者必须的设计，我们让然需要去做，因为程序员都是追求完美，适应以后潜在的变化。相反如果是将一个相对好的设计，或者扩展，花时间去做到所谓的简单设计，丧失扩展等，这不是减少资源投入，这是在捣蛋，花时间精力去搞破坏，即使是你认为不变，何况谁能预测未来世界。</p>

<p>&#160;&#160;&#160;&#160; 如果我们不是牛人，你却也追求卓越软件，我觉得我们还是需要考虑下设计，不要一味的“简单设计”，平衡各种方法论，权衡各种利弊，找到适合自己的方式方法论，如果只是”简单设计“却没有足够的重构力度，抑或完全的优先设计，不不断的持续改进，逐步细化，做到“简约而不简单”记住所有的技术债早晚会需要你偿还的。对于我来说没有万能的方法论，我也不是牛人，我选择设计，重构等方法论的权衡。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2013/04/27/3048250.html" title="原文首发">原文首发请看这里</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/16/Angularjs-Controller-jian-tong-xin-ji-zhi/">Angularjs Controller 间通信机制</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-16T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><span style="font-size: 16px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在<a href="http://www.cnblogs.com/whitewolf/archive/2013/03/24/2979344.html">Angularjs开发一些经验总结</a>随笔中提到我们需要按照业务却分angular controller，避免过大无所不能的上帝controller，我们把controller分离开了，但是有时候我们需要在controller中通信，一般为比较简单的通信机制，告诉同伴controller我的某个你所关心的东西改变了，怎么办？如果你是一个javascript程序员你会很自然的想到异步回调响应式通信&mdash;事件机制(或消息机制)。对，这就是angularjs解决controller之间通信的机制，所推荐的唯一方式，简而言之这就是angular way。</span></p>

<h2><span style="font-size: 16px; font-family: 楷体;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Angularjs为在scope中为我们提供了冒泡和隧道机制，$broadcast会把事件广播给所有子controller，而$emit则会将事件冒泡传递给父controller，$on则是angularjs的事件注册函数，有了这一些我们就能很快的以angularjs的方式去解决angularjs controller之间的通信，代码如下：</span></h2>

<h2><span style="font-size: 16px; font-family: 楷体;">View:</span></h2>

<div class="cnblogs_code">
<pre class='green'><span style="color: #008080;">1</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">ng-app</span><span style="color: #0000ff;">="app"</span><span style="color: #ff0000;"> ng-controller</span><span style="color: #0000ff;">="parentCtr"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">2</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">ng-controller</span><span style="color: #0000ff;">="childCtr1"</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">name :
</span><span style="color: #008080;">3</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">ng-model</span><span style="color: #0000ff;">="name"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text"</span><span style="color: #ff0000;"> ng-change</span><span style="color: #0000ff;">="change(name);"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">4</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">5</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">ng-controller</span><span style="color: #0000ff;">="childCtr2"</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">Ctr1 name:
</span><span style="color: #008080;">6</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">ng-model</span><span style="color: #0000ff;">="ctr1Name"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">7</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">8</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span></pre>
</div>


<p><span style="font-size: 16px; font-family: 楷体;">Controller:</span></p>

<div class="cnblogs_code">
<pre class='green'><span style="color: #008080;"> 1</span> angular.module("app", []).controller("parentCtr"<span style="color: #000000;">,
</span><span style="color: #008080;"> 2</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> ($scope) {
</span><span style="color: #008080;"> 3</span>     $scope.$on("Ctr1NameChange"<span style="color: #000000;">,
</span><span style="color: #008080;"> 4</span>  
<span style="color: #008080;"> 5</span>     <span style="color: #0000ff;">function</span><span style="color: #000000;"> (event, msg) {
</span><span style="color: #008080;"> 6</span>         console.log("parent"<span style="color: #000000;">, msg);
</span><span style="color: #008080;"> 7</span>         $scope.$broadcast("Ctr1NameChangeFromParrent"<span style="color: #000000;">, msg);
</span><span style="color: #008080;"> 8</span> <span style="color: #000000;">    });
</span><span style="color: #008080;"> 9</span> }).controller("childCtr1", <span style="color: #0000ff;">function</span><span style="color: #000000;"> ($scope) {
</span><span style="color: #008080;">10</span>     $scope.change = <span style="color: #0000ff;">function</span><span style="color: #000000;"> (name) {
</span><span style="color: #008080;">11</span>         console.log("childCtr1"<span style="color: #000000;">, name);
</span><span style="color: #008080;">12</span>         $scope.$emit("Ctr1NameChange"<span style="color: #000000;">, name);
</span><span style="color: #008080;">13</span> <span style="color: #000000;">    };
</span><span style="color: #008080;">14</span> }).controller("childCtr2", <span style="color: #0000ff;">function</span><span style="color: #000000;"> ($scope) {
</span><span style="color: #008080;">15</span>     $scope.$on("Ctr1NameChangeFromParrent"<span style="color: #000000;">,
</span><span style="color: #008080;">16</span>  
<span style="color: #008080;">17</span>     <span style="color: #0000ff;">function</span><span style="color: #000000;"> (event, msg) {
</span><span style="color: #008080;">18</span>         console.log("childCtr2"<span style="color: #000000;">, msg);
</span><span style="color: #008080;">19</span>         $scope.ctr1Name =<span style="color: #000000;"> msg;
</span><span style="color: #008080;">20</span> <span style="color: #000000;">    });
</span><span style="color: #008080;">21</span> });</pre>
</div>


<p><span style="font-size: 16px; font-family: 楷体;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 这里childCtr1的name改变会以冒泡传递给父controller，而父controller会对事件包装在广播给所有子controller，而childCtr2则注册了change事件，并改变自己。注意父controller在广播时候一定要改变事件name。</span></p>

<p><span style="font-size: 16px;">jsfiddle链接：<a href="http://jsfiddle.net/whitewolf/5JBA7/15/">http://jsfiddle.net/whitewolf/5JBA7/15/</a></span></p>

<p>&nbsp;</p>

<iframe width="100%" height="300" src="http://jsfiddle.net/whitewolf/5JBA7/15/embedded/" allowfullscreen="allowfullscreen" frameborder="0"></iframe>


<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2013/04/16/3024843.html" title="原文首发">原文首发请看这里</a></p>
=======
  <div class="entry-content"><p>&nbsp;&nbsp;&nbsp; 今天在在外文网站Google关于Windows Phone 7的学习资料，无疑间Google到了<a href="http://www.jeffblankenburg.com/author/jeffblankenburg.aspx">Jeff Blankenburg</a>的 <a href="http://www.jeffblankenburg.com/post/31-Days-of-Windows-Phone-7c-Day-1-Project-Template.aspx">31 Days of Windows Phone</a> 这个系列，感觉写的比较基础和浅显易懂，适合我这种入们级的人学习，所以准备拿来对Windows Phone 7的简单入门学习。并翻译出来供像我一样的菜鸟学习，我的E文并不好，所以翻译难免会有一些不对的忘大家原谅和多多指教。说道E文又想起大学时，就是因为这个E文让我少的了一大笔奖学金，哎。翻译这个系列，也顺便提高一下我的E文吧，呵呵。</p>

<p>&nbsp;&nbsp; 步入正题：今天是我们Windows Phone学习的第一天，是一些关于项目模板的。</p>

<p>&nbsp; 首先： 在学习Windows Phone7之前我们假设你已经对Microsoft 的Silverlight有了一定的了解，如果你还不了解，你也可以参考作者的&nbsp; 20天Silverlight这个系列&nbsp; ，讲解的都是一些Silverlight的基础级知识。</p>

<p>&nbsp; 再者我们假设你已经安装了Microsoft 所有Windows Phone Tools，如果你没有安装，你可以从这里下载<a href="http://developer.windowsphone.com/">http://developer.windowsphone.com/</a>，从这里我们会获得Visual Studio 2010 for Windows Phone和 Expression Blend 4 for&nbsp; Windows Phone。如果在你的机子已经安装了官方的正式版，你仅需要更新添加一些新的模板。</p>

<p>&nbsp;&nbsp; 在今天我们会预览一下Visual Studio 2010为我们的Windows Phone应用程序生成的默认模板。</p>

<p><img src="http://www.jeffblankenburg.com/image.axd?picture=NewProject.png" title="NewProject" alt="NewProject" /></p>

<h4><font style="font-weight: bold">Solution Explorer：</font></h4>

<p>下面是vs2010默认为我们生成的解决方案，我不准备详细介绍各个文件，你可以从<a target="_blank"><a href="http://bit.ly/8XcWaO"><font color="#3d81ee">安装上所有Tools</font></a>&nbsp;</a>并自己尝试，比较简单。</p>

<h4><img src="http://www.jeffblankenburg.com/image.axd?picture=SolutionExplorer.png" title="SolutionExplorer" alt="SolutionExplorer" /></h4>

<h4><font style="font-weight: bold">ApplicationIcon.png:</font></h4>

<p>&nbsp; 是Phone application List现实的图标，你也可以替换成你想要的图标。</p>

<h4><font style="font-weight: bold">App.xaml：</font></h4>

<h4>&nbsp; 有点像ASP.NET web.config 文件，保存了我们应用程序的常用数据和设置，我更喜欢防止我的style在这里，但这不是必须的。</h4>

<h4><font style="font-weight: bold">App.xaml.cs：</font></h4>

<p>是前一文件（App.xaml）的Code-Behind文件，和前一个文件一起定义我们应用程序的入口点，初始化应用程序级别的全局静态资源(StaticResource)和启动程序的页面。</p>

<h4><font style="font-weight: bold">AssemblyInfo.cs：</font></h4>

<p>定义了我们应用程序的程序集信息，入 版本，名称等。个人觉得和我们的WinForm、Asp.net程序应该差不多。</p>

<h4><font style="font-weight: bold">Background.png：</font></h4>

<p>是我们应用程启动时的屏幕背景，我们也可以替换为你需要的图标。</p>

<h4><font style="font-weight: bold">MainPage.xaml：</font></h4>

<p>是我们应用程序启动的默认页面，这只是一个一般习惯，我们也可以在WMAppManifest.xml 中修改：</p>

<pre>&lt;Tasks&gt;</pre>


<pre>       &lt;DefaultTask  Name ="_default" NavigationPage="MainPage.xaml"/&gt;    </pre>


<pre> &lt;/Tasks&gt;</pre>


<h4><font style="font-weight: bold">MainPage.xaml.cs：</font></h4>

<p>前一个文件(MainPage.xaml)的Code-Behind文件，在这里需要我们编辑页面启动页面的Code.</p>

<h4><font style="font-weight: bold">SplashScreenImage.jpg:</font></h4>

<p>应用程序加载图标（即：我的应用程序启动，第一个页面还没有显示时）。我们也可以替换这个图标。在这里只是为了让我们的用户了解程序正在加载。</p>

<h4><font style="font-weight: bold">WMAppManifest.xml：</font></h4>

<p>用于定义我们应用程序打包的文件(manifest)。 Silverlight程序最终会打成xap包（zip格式），里面包含了程序需要用到的所有资源（例如图片，声音文件等等），和依赖 的第三方DLL等等。AppManifest.xml文件用于定义打包的结构。</p>

<p>&nbsp;</p>

<p>第一天学习很简单，就到这里的作者给我们提供了Code下载，其实我觉得没有必要。所以偷个懒了。</p>

<p>本文E文原文：<a href="http://www.jeffblankenburg.com/post/31-Days-of-Windows-Phone-7c-Day-1-Project-Template.aspx" title="http://www.jeffblankenburg.com/post/31-Days-of-Windows-Phone-7c-Day-1-Project-Template.aspx">http://www.jeffblankenburg.com/post/31-Days-of-Windows-Phone-7c-Day-1-Project-Template.aspx</a></p>

<p>关于Windows Phone的一些学习资料：</p>

<p>1：首先是翻译的原文：&nbsp;<a href="http://www.jeffblankenburg.com/author/jeffblankenburg.aspx">Jeff Blankenburg</a>博客<a href="http://www.jeffblankenburg.com/post/31-Days-of-Windows-Phone-7c-Day-1-Project-Template.aspx" title="http://www.jeffblankenburg.com/post/31-Days-of-Windows-Phone-7c-Day-1-Project-Template.aspx">http://www.jeffblankenburg.com/post/31-Days-of-Windows-Phone-7c-Day-1-Project-Template.aspx</a></p>

<p>2: 园友<a href="#">306Room</a>的一起学Windows Phone系列<a href="http://www.cnblogs.com/randylee/category/258713.html" title="http://www.cnblogs.com/randylee/category/258713.html">http://www.cnblogs.com/randylee/category/258713.html</a></p>

<p>3：<a href="http://windowsteamblog.com/windows_phone/" title="http://windowsteamblog.com/windows_phone/">http://windowsteamblog.com/windows_phone/</a></p>

<p>4：<a href="http://create.msdn.com/en-US/" title="http://create.msdn.com/en-US/">http://create.msdn.com/en-US/</a></p>

<p>还有其他的我在后续看见了，也会一一不上。也希望大家给我提供一些学习资料，共同进步。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2010/11/10/1873273.html" title="原文首发">原文首发请看这里</a></p>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
<<<<<<< HEAD
      <h1 class="entry-title"><a href="/blog/2013/04/14/li-yong-Travis-CI-rang-ni-di-github-xiang-mu-chi-xu-gou-jian-Node-js-wei-li/">利用Travis CI 让你的github项目持续构建(Node.js为例)</a></h1>
=======
      <h1 class="entry-title"><a href="/blog/2010/09/27/Dbml-wen-jian-ti-qu-jian-biao-TSql-CodeSmith/">Dbml文件提取建表TSql-CodeSmith</a></h1>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
    
    
      <p class="meta">
        








  


<<<<<<< HEAD
<time datetime="2013-04-14T00:00:00+08:00" pubdate data-updated="true"></time>
=======
<time datetime="2010-09-27T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2010/09/27/Dbml-wen-jian-ti-qu-jian-biao-TSql-CodeSmith/#disqus_thread"
             data-disqus-identifier="http://greengerong.github.io/blog/2010/09/27/Dbml-wen-jian-ti-qu-jian-biao-TSql-CodeSmith/">Comments</a>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
        
      </p>
    
  </header>


<<<<<<< HEAD
  <div class="entry-content"><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Travis CI 是目前新兴的开源持续集成构建项目，它与jenkins，GO的很明显的特别在于采用yaml格式，简洁清新独树一帜。目前大多数的github项目都已经移入到Travis CI的构建队列中，据说Travis CI每天运行超过4000次完整构建。对于做开源项目或者github的使用者，如果你的项目还没有加入Travis CI构建队列，那么我真的想对你说out了。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 下面是本人的构建历史：</p>

<p>&nbsp;<img src="http://images.cnitblog.com/blog/63184/201304/14093241-01c09362fb72431dabed0cb6635a0fdb.png" alt="" /></p>

<p>&nbsp;</p>

<p>&nbsp; 搭建Travis CI build，需要你有个github账号和github项目：</p>

<p>1：用github账号登陆<a href="http://travis-ci.org">Travis CI</a>.</p>

<h5>2 :在右上角你的账户名点击进入 account，在Repositories tab页点击Sync now同步你的github项目，</h5>

<p>3：选中项目将默认的off改变为on开启项目的持续集成。</p>

<p>4：在你项目的根目录建立一个.travis.yml文件，内容为：</p>

<p>language: node_js</p>

<p>node_js:&nbsp;&nbsp;</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp; &ndash; 0.4&nbsp;&nbsp;</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp; &ndash; 0.6</p>

<p>5: 在打开你的node.js的package.json文件，确保加入script/test节点：</p>

<p>&ldquo;scripts&rdquo;: {</p>

<p>&nbsp; &nbsp; &ldquo;test&rdquo;: &ldquo;XXXX&rdquo;</p>

<p>&nbsp; },</p>

<p>这里你可惜选择mak或者jasmine-node等node.js测试框架的测试命令。并且可以把依赖加入package的depends</p>

<p>6：在你项目中运行npm test，确保正常工作。</p>

<p>7： check in你的code到github，代开tracivs
ci界面等待其同步并运行你的build构建。</p>

<p>&nbsp;</p>

<p>&nbsp; 如果你需要将你的build构建状态放在一个显眼的位置或者项目readme，你可以在首页My Repositories中找到项目并设置中复制状态图片code，形如：</p>

<p><code>markdown
  [![Build Status]([https://travis-ci.org/greengerong/
  qing.png?branch=master)](https://travis-ci.org/greengerong/
  qing](https://travis-ci.org/greengerong/qing.png?
  branch=master)%5D(https://travis-ci.org/greengerong/qing))
 </code></p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;
Travs CI 支持多中语言如ruby，java的maven，gradle,Go等请参见文档<a href="http://about.travis-ci.org/docs/">Travis Docs</a>.</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp; 在上面提到的travis.yml文件中我们还可以加入build前后执行脚本，形如：</p>

<p>before_script:&nbsp;&nbsp;</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp; &ndash; before_command_1&nbsp;&nbsp;</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp; &ndash; before_command_2</p>

<p>after_script:&nbsp;&nbsp;</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp; &ndash; after_command_1&nbsp;</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp; &ndash; after_command_2</p>

<p>&nbsp;</p>

<p>&nbsp;&nbsp; &nbsp;将你的开源项目加入Travis CI队列吧，很容易让你的项目加入持续集成，持续构建队列。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2013/04/14/3019838.html" title="原文首发">原文首发请看这里</a></p>
=======
  <div class="entry-content"><p>&nbsp;&nbsp;&nbsp;&nbsp; 在昨天一个大学师弟，他问我能不能将LinqToSql文件转化为创建表的TSql语句，他是刚开始学习.NET，所以在网上下些示例看，但苦于没有数据库。所以就有了这一篇博客，作为我的Code生成技术的CodeSimth的最后一篇示例。在下一步Code 生成技术将转到Microsoft的T4模板，Code生成技术目前完成的有<a href="http://www.cnblogs.com/whitewolf/archive/2010/07/09/1774279.html">CodeDom</a>,<a href="http://www.cnblogs.com/whitewolf/archive/2010/09/27/1836729.html">CodeSmith模板</a>，高手请不要拍砖，请直接跳过。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp; 在Linq2Sql的Dbml文件其实就是一个Xml文件，记录着数据库与生成Linq2SqlCode的数据信息，所以转化为TSql没有什么说的。我们需要提取其中的数据库信息，在转化为我们的Tsql，在这里建立了DBTable、DBColumn、DBAssociation三个实体类：</p>

<pre><code>    代码 

    Code highlighting produced by Actipro CodeHighlighter (freeware)http://www.CodeHighlighter.com/--&gt;  1 using System; 
    using System.Collections.Generic; 
    using System.Linq; 
    using System.Text; 

    namespace DbmlToTable 
    { 
        public class DBTable 
        { 

            public DBTable() 
            { 
                Columns = new List&lt;DBColumn&gt;(); 
                this.Associations = new List&lt;DBAssociation&gt;(); 
            } 

            public string TableName 
            { 
                get; 
                set; 
            } 

            public List&lt;DBColumn&gt; Columns 
            { 
                get; 
                set; 
            } 

            public List&lt;DBAssociation&gt; Associations 
            { 
                get; 
                set; 
            } 

        } 

        public class DBColumn 
        { 
            public string Name 
            { 
                get; 
                set; 
            } 

            public string DBType 
            { 
                get; 
                set; 
            } 

            public bool IsPrimaryKey 
            { 
                get; 
                set; 
            } 

            public bool IsDbGenerated 
            { 
                get; 
                set; 
            } 

            public bool CanBeNull 
            { 
                get; 
                set; 
            } 
        } 

        public class DBAssociation 
        { 
            public string Name 
            { 
                get; 
                set; 
            } 

            public string ThisKey 
            { 
                get; 
                set; 
            } 

            public string OtherKey 
            { 
                get; 
                set; 
            } 

            public bool IsForeignKey 
            { 
                get; 
                set; 
            } 
        } 

        public class DBTableHlper 
        { 
            public static DBTable GetAssociationTable(List&lt;DBTable&gt; collection,string assName) 
            { 

                return collection.Find(t =&gt; t.Associations.Find(a =&gt; !a.IsForeignKey &amp;&amp; a.Name == assName) != null); 
            } 
        } 
    }
</code></pre>

<p>&nbsp;&nbsp;&nbsp; 其中DBTableHlper是由于我的Codesimth是2.0版本的，不能用lamdam表达式，所以我将它编译在程序集里面。</p>

<p>&nbsp;&nbsp; 建立了一个 将我们的dbml文件xml Document转化为实体类辅助类：</p>

<pre><code>     代码 

    Code highlighting produced by Actipro CodeHighlighter (freeware)http://www.CodeHighlighter.com/--&gt; 1 using System; 
    using System.Collections.Generic; 
    using System.Linq; 
    using System.Text; 
    using System.Xml; 
    using System.Xml.Linq; 

    namespace DbmlToTable 
    { 

        public interface IDbTableCollectionHelper 
        { 
            List&lt;DBTable&gt; Transport(XElement element); 
        } 

        public class DbTableCollectionHelper : IDbTableCollectionHelper 
        { 
            #region IDbTableCollectionHelper 成员 

            public List&lt;DBTable&gt; Transport(XElement element) 
            { 
                List&lt;DBTable&gt; collection = new List&lt;DBTable&gt;(); 
                var tables = element.Elements(XName.Get("Table", "http://schemas.microsoft.com/linqtosql/dbml/2007%22)); 
                foreach (var tab in tables) 
                { 
                    DBTable t = new DBTable() { TableName = tab.Attribute("Name").Value }; 
                    var cols = tab.Element(XName.Get("Type", "http://schemas.microsoft.com/linqtosql/dbml/2007%22)).Elements(XName.Get(%22Column%22, "http://schemas.microsoft.com/linqtosql/dbml/2007%22)); 
                    foreach (var col in cols) 
                    { 
                        DBColumn c = new DBColumn() 
                        { 
                            CanBeNull = col.Attribute("CanBeNull") != null ? col.Attribute("CanBeNull").Value.ToLower() == "true" : false, 
                            DBType = col.Attribute("DbType") != null ? col.Attribute("DbType").Value : "", 
                            IsDbGenerated = col.Attribute("IsDbGenerated") != null ? col.Attribute("IsDbGenerated").Value.ToLower() == "true" : false, 
                            IsPrimaryKey = col.Attribute("IsPrimaryKey") != null ? col.Attribute("IsPrimaryKey").Value.ToLower() == "true" : false, 
                            Name = col.Attribute("Name") != null ? col.Attribute("Name").Value : "" 
                        }; 
                        t.Columns.Add(c); 
                    } 

                    var ass = tab.Element(XName.Get("Type", "http://schemas.microsoft.com/linqtosql/dbml/2007%22)).Elements(XName.Get(%22Association%22, "http://schemas.microsoft.com/linqtosql/dbml/2007%22)); 
                    foreach (var item in ass) 
                    { 
                        DBAssociation a = new DBAssociation() 
                        { 
                            Name = item.Attribute("Name") != null ? item.Attribute("Name").Value : "", 
                            OtherKey = item.Attribute("OtherKey") != null ? item.Attribute("OtherKey").Value : "", 
                            ThisKey = item.Attribute("ThisKey") != null ? item.Attribute("ThisKey").Value : "", 
                            IsForeignKey = item.Attribute("IsForeignKey") != null ? item.Attribute("IsForeignKey").Value.ToLower() == "true" : false 
                        }; 
                        t.Associations.Add(a); 
                    } 
                    collection.Add(t); 
                } 
                return collection; 
            } 

            #endregion 
        } 
    }
</code></pre>

<p>&nbsp;&nbsp; 在转化为我们的实体类，我们剩下的就是编写我们的CodeSmith模板了（更多知识可以参考<a href="http://www.cnblogs.com/whitewolf/archive/2010/09/27/1836729.html">CodeSmith模板</a>）：</p>

<pre><code>     代码 

    Code highlighting produced by Actipro CodeHighlighter (freeware)http://www.CodeHighlighter.com/--&gt; 1 &lt;%@ CodeTemplate Language="C#" TargetLanguage="Text" Src="" Inherits="" Debug="False" Description="Template description here." %&gt; 

    &lt;%@ Import NameSpace="System" %&gt; 
    &lt;%@ Import NameSpace="System.Xml" %&gt; 
    &lt;%@ Import NameSpace="System.Text" %&gt; 
    &lt;%@ Import NameSpace="System.Collections.Generic" %&gt; 
    &lt;%@ Assembly Name="DbmlToTable" %&gt; 

    --Code By Wolf 
    &lt;script runat="template"&gt; 
    private List&lt;DbmlToTable.DBTable&gt; _DbTableCollection; 
    public List&lt;DbmlToTable.DBTable&gt; DbTableCollection 
    { 
        get 
        { 
            return _DbTableCollection; 
        } 
        set    
        { 
            _DbTableCollection=value; 
        } 
    } 

    public  string GeneratorTableSql(List&lt;DbmlToTable.DBTable&gt; collection) 
    { 
        StringBuilder sb = new StringBuilder(); 
        StringBuilder sbAssocation = new StringBuilder(); 
        foreach (DbmlToTable.DBTable item in collection) 
        { 
            List&lt;string&gt; cols = new List&lt;string&gt;(); 
            foreach (DbmlToTable.DBColumn  col in item.Columns) 
            { 
                cols.Add(string.Format("{0} {1} {2} ", col.Name, col.DBType, col.IsPrimaryKey ? "PRIMARY KEY " : "")); 
            } 
            sb.AppendFormat("\r\nCREATE TABLE {0} \r\n(\r\n{1}\r\n)", item.TableName, string.Join(",\r\n", cols.ToArray())); 

            foreach (DbmlToTable.DBAssociation ass in item.Associations) 
            { 
                if (ass.IsForeignKey) 
                { 
                    DbmlToTable.DBTable tab = DbmlToTable.DBTableHlper.GetAssociationTable(collection,ass.Name); 
                    if (tab != null) 
                    { 
                        sbAssocation.AppendLine(); 
                        sbAssocation.AppendFormat(@"ALTER TABLE {0}  WITH NOCHECK ADD  CONSTRAINT {1} FOREIGN KEY({2}) REFERENCES {3} ({4})", 
                            item.TableName, "FK_" + ass.Name, ass.ThisKey, tab.TableName, ass.OtherKey); 
                    } 
                } 
            } 
        } 

        return sb.ToString() + "\r\n" + sbAssocation.ToString(); 
    } 
    &lt;/script&gt; 
    &lt;%= this.GeneratorTableSql(_DbTableCollection) %&gt;
</code></pre>

<p>&nbsp;&nbsp;&nbsp; 在codeSimth中我们建立了一个集合属性传递实体类DBTable和一个转化TSql辅助方法.</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在控制台调用编译模板以及输出：</p>

<pre><code>    代码 

    Code highlighting produced by Actipro CodeHighlighter (freeware)http://www.CodeHighlighter.com/--&gt; 1 using System; 
    using System.Collections.Generic; 
    using System.Linq; 
    using System.Text; 

    namespace DbmlToTable 
    { 
        class Program 
        { 
            static void Main(string[] args) 
            { 
                IDbTableCollectionHelper helper = new DbTableCollectionHelper(); 
                List&lt;DBTable&gt; collection = helper. 
                    Transport(System.Xml.Linq.XElement.

             Load(@"xxpath\MultipleDocument.Data\MultipleDocumentDB.dbml")); 

                CodeSmith.Engine.CodeTemplate template = CodeSimthTemplateHelper. 
                    CompileTemplate(@"DBMLToTable.cst", w =&gt; Console.WriteLine(w)); 
                if (template != null) 
                { 
                    CodeSimthTemplateHelper.AddPropertyParams(template, new { DbTableCollection = collection }); 
                    string str = template.RenderToString(); 
                    Console.WriteLine(str); 
                    //System.IO.File.AppendAllText(@"D:\1.sql", str); 
                } 
                Console.Read(); 
            }

    }
</code></pre>

<p>&nbsp;&nbsp; 在CodeSimth中就是这么简单，生成相应的模板代码（个人理解CodeSmith就是把代码作为字符串输出）。</p>

<p>在上面到我的CodeSmith模板编译辅助类，在上一篇<a href="http://www.cnblogs.com/whitewolf/archive/2010/09/25/1834317.html">通过代码生成机制实现强类型编程-CodeSmith版</a>也有，在这里也附带上：需要引用CodeSmith.Engine.dll.</p>

<pre><code>    代码 

        Code highlighting produced by Actipro CodeHighlighter (freeware)http://www.CodeHighlighter.com/--&gt; 1 using System; 

        using System.Collections.Generic; 

        using System.Linq; 

        using System.Text; 

        using CodeSmith.Engine; 

        using Wolf.NameValueDictionary; 

        namespace DbmlToTable 

        { 

        public class CodeSimthTemplateHelper 

        { 

             public static CodeTemplate CompileTemplate(string templateName, Action errorWriter) 

             { 

                   CodeTemplateCompiler compiler = new CodeTemplateCompiler(templateName); compiler.Compile(); 

                  if (compiler.Errors.Count == 0) 

                   { 

                   return compiler.CreateInstance();

                   } 

               else 

                 { 

                   for (int i = 0; i &lt; compiler.Errors.Count; i++) 

                { 

                    errorWriter(compiler.Errors[i].ToString()); 

                 } 

                return null; 

               } 

        } 



        public static void AddPropertyParams(CodeTemplate template,object param) 

        { 

              NameValueDictionary dict = new NameValueDictionary&lt;object&gt;(param);

               AddPropertyParams(template, dict);

        }



        public static void AddPropertyParams(CodeTemplate template, NameValueDictionary&lt;object&gt; param)

        {

                  NameValueDictionary&lt;object&gt; dict = new NameValueDictionary&lt;object&gt;(param);

                  foreach (var item in dict.Keys)

                  {

                        template.SetProperty(item, dict[item]);

                   }

        }

        }

        }
</code></pre>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文通过程序<a href="https://github.com/greengerong/cnblogs-blogs2markdown" title="cnblogs-blogs2markdown">cnblogs-blogs2markdown</a>转换的,如质量有问题<a href="http://www.cnblogs.com/whitewolf/archive/2010/09/27/1836731.html" title="原文首发">原文首发请看这里</a></p>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/10/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/8/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>破 狼</h1>
  <p>    那一夜，我听了一宿梵唱，不为参悟，只为寻你的一丝气息。 那一月，我转过所有经轮，不为超度，只为触摸你的指纹。 那一年，我磕长头拥抱尘埃，不为朝佛，只为贴着了你的温暖。 那一世，我翻遍十万大山，不为修来世，只为路中能与你相遇。 那一瞬，我飞升成仙，不为长生，只为佑你平安喜乐。<a href="http://greengerong.github.io/blog/2009/12/24/cang-yang-jia-cuo-na-yi-tian-na-yi-yue-na-yi-nian-na-yi-shi/">《那一天，那一月，那一年，那一世》&#8211;仓央嘉措。</a></p>
</section>
<section>
  <p style="align: center"><a href="http://www.amazingcounters.com"><img border="0" src="http://cc.amazingcounters.com/counter.php?i=3158890&amp;c=9476983" alt="count web site visits"/></a></p>
<<<<<<< HEAD
</section>
<section>
    <h1>博客友情链接</h1>
    <ul>
        <li><a href="http://www.cnblogs.com/whitewolf/">博客园-破狼</a></li>
        <li><img src="http://greengerong.com/self/wei-xin-wolf-er-wei-ma.jpg" alt="破狼微信号订阅号" /></li>
    </ul>
=======
  <div style="display: none;">
    <script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa24b16b917fd5e88f6d6dd10dc673619' type='text/javascript'%3E%3C/script%3E"));
</script>

  </div>
</section>
<section>
<h1>博客友情链接</h1>
  <ul>
    <li><a href="http://www.cnblogs.com/whitewolf/">博客园-破狼</a></li>
    <li><a href="http://whitewolfblog.blog.51cto.com/">51CTO&#8211;破狼</a></li>
  </ul>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
<<<<<<< HEAD
        <a href="/blog/2016/01/30/zone-dot-js-bao-li-zhi-mei/">zone.js - 暴力之美</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/12/30/angularjsshen-du-pou-xi-yu-zui-jia-shi-jian-jian-jie/">《AngularJS深度剖析与最佳实践》简介</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/20/ni-ying-gai-zhi-dao-de-jqueryji-qiao/">(译)你应该知道的jQuery技巧</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/18/javascript-duo-xian-cheng-zhi-html5-web-worker/">JavaScript多线程之HTML5 Web Worker</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/11/angular-remove-unnecessary-watch-to-improve-performance/">Angular移除不必要的$watch之性能优化</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/27/javascript-single-thread-and-browser-event-loop/">JavaScript单线程和浏览器事件循环简述</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/22/promisede-miao-yong/">Promise的前世今生和妙用技巧</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/18/angular-wang-zhan-yong-hu-yin-dao-cha-jian/">自定义Angular插件 - 网站用户引导</a>
=======
        <a href="/blog/2014/02/28/nodejs-get-client-ip/">nodejs获取客户端IP Address</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/02/21/angular-form-addControl/">细说angular Form addControl方法</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/02/16/angularjs-chinese-guide-public/">Angularjs中文版本开发指南发布</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/02/15/index-for-ng-options/">为Angularjs ngOptions加上index解决方案</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/02/11/angular-ngclick-stoppropagation/">Angular ngClick阻止冒泡,默认行为</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/27/angular-ngcloak-new/">ngCloak 实现 Angular 初始化闪烁最佳实践</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/27/angular-ngcloak/">ngCloak 实现 Angular 初始化闪烁最佳实践</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/24/angular-controller-as-syntax-vs-scope/">Angular Controller as Syntax vs Scope</a>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/greengerong">@greengerong</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'greengerong',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
<<<<<<< HEAD
  Copyright &copy; 2016 - 破 狼 -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress
</a></span>
=======
  Copyright &copy; 2014 - 破 狼 -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0
</p>

</footer>
  
<<<<<<< HEAD
 
 
=======

<script type="text/javascript">
      var disqus_shortname = 'greengerong';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>









>>>>>>> 0bab7647fe4f4f5795aed418af9d97aabf2983a0


</body>
</html>
